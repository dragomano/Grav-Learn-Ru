<!doctype html><html lang=ru class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Как обновить Grav CMS до версии 1.7."><meta name=author content=Bugo><link href=https://grav-docs.ru/advanced/grav-development/grav-17-upgrade-guide/ rel=canonical><link href=../grav-16-upgrade-guide/ rel=prev><link href=../../yaml/ rel=next><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.17"><link rel=apple-touch-icon sizes=180x180 href=../../../assets/images/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../assets/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../assets/images/favicon-16x16.png><link rel=manifest href=../../../assets/images/site.webmanifest><link rel=mask-icon href=../../../assets/images/safari-pinned-tab.svg color=#5bbad5><link rel="shortcut icon" href=../../../assets/images/favicon.ico><meta name=msapplication-TileColor content=#da532c><meta name=msapplication-config content=../../../assets/images/browserconfig.xml><meta name=theme-color content=#ffffff><title>Руководство по обновлению до Grav 1.7 - Документация Grav CMS на русском</title><link rel=stylesheet href=../../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style><link rel=stylesheet href=../../../extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script> <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#rukovodstvo-po-obnovleniiu-do-grav-1-7 class=md-skip> Перейти к содержанию </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул"> <a href=../../.. title="Документация Grav CMS на русском" class="md-header__button md-logo" aria-label="Документация Grav CMS на русском" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M302.6 210.6c4.5 4.5 4.5 12.3 0 16.8l-10 10c-4.5 4.9-12.3 4.9-17.1 0l-10.8-10.8c-4.5-4.9-4.5-12.3 0-17.1l10-10c4.5-4.5 12.3-4.5 17.1 0zm-31.2-20.3a7.7 7.7 0 1 0-10.6-11 7.7 7.7 0 1 0 10.6 11m-26.8 5.5a7.5 7.5 0 1 0 10.7 10.5 7.5 7.5 0 1 0-10.7-10.5m74.8-13.8c-20.5-14.9-34.9-44.6-12.3-70.3 22.3-25.7 42-17.8 61.7.8 12.3 11.7 30.2 25.7 17.8 49.8-12.9 24.3-46.6 34.3-67.2 19.7m49.2-45.9c-9.2-10.3-24.1 7.1-16 16.6 7.6 9.3 33.1 2.5 16-16.6M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m443.7 44c2.6-16.6-20.9-17.1-26-26.5-14-24.9-28.6-38-56.3-31.4 12-8.3 24.3-6.3 24.3-6.3.3-6.6 0-13.4-9.7-25.7 4-12.9.3-23.1.3-23.1 16-8.9 27.7-25.2 30-44.6 3.7-32-19.4-61.1-51.4-64.8-22.8-2.6-45.1 7.9-56.1 26.5-23.9 41.4 1.4 73.2 23.1 84-14.9-1.4-35.4-12.3-41.4-35.4-6.8-26.5 2.9-51.4 9.2-63.4 0 0-4.5-6-8.3-9.2 0 0-14.2 0-25.4 5.5 12.3-15.7 26-14.9 26-14.9 0-6.6-.6-15.4-3.7-22.3-5.6-11.4-24.6-13.3-32.7 2.9.1-.2.3-.4.4-.5-5.2 12.3-1.1 57.7 17.4 90-2.6 1.4-9.4 6.3-13.4 10.3-22.3 10-58 62.2-58 62.2-29.1 11.1-79.7 52.5-72.9 82.3.3 3.1 1.4 5.7 3.1 7.7-2.9 2.3-5.7 5.2-8.6 8.6-12.3 14.2-5.5 36.3 18.3 25.2 16.3-7.4 30.6-20.9 37.5-31.4 0 0-5.7-5.2-16.8-4.5 28.6-6.8 35.4-9.7 47.7-9.4 8.3 4 8.3-35.4 8.3-35.4 0-15.2-2.3-32-11.5-42.8 12.9 12.6 30 33.8 28.9 62.6-.8 18.9-15.7 23.7-15.7 23.7-9.4 17.1-44.6 68-31.4 109.4 0 0-10-15.4-10.5-22.8-18 20-48 54-25.4 66.6 27.5 15.2 112.3-91.5 130.3-146.9 35.7-21.5 57.2-48.8 66-67.1C362 284 437.7 336.6 443.7 300"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Документация Grav CMS на русском </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Руководство по обновлению до Grav 1.7 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=light-blue data-md-color-accent=orange aria-label="Тёмный режим" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Тёмный режим" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=orange aria-label="Светлый режим" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Светлый режим" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Поиск placeholder=Поиск autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Поиск> <a href=javascript:void(0) class="md-search__icon md-icon" title=Поделиться aria-label=Поделиться data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Очистить aria-label=Очистить tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Инициализация поиска </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Навигация data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Документация Grav CMS на русском" class="md-nav__button md-logo" aria-label="Документация Grav CMS на русском" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M302.6 210.6c4.5 4.5 4.5 12.3 0 16.8l-10 10c-4.5 4.9-12.3 4.9-17.1 0l-10.8-10.8c-4.5-4.9-4.5-12.3 0-17.1l10-10c4.5-4.5 12.3-4.5 17.1 0zm-31.2-20.3a7.7 7.7 0 1 0-10.6-11 7.7 7.7 0 1 0 10.6 11m-26.8 5.5a7.5 7.5 0 1 0 10.7 10.5 7.5 7.5 0 1 0-10.7-10.5m74.8-13.8c-20.5-14.9-34.9-44.6-12.3-70.3 22.3-25.7 42-17.8 61.7.8 12.3 11.7 30.2 25.7 17.8 49.8-12.9 24.3-46.6 34.3-67.2 19.7m49.2-45.9c-9.2-10.3-24.1 7.1-16 16.6 7.6 9.3 33.1 2.5 16-16.6M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m443.7 44c2.6-16.6-20.9-17.1-26-26.5-14-24.9-28.6-38-56.3-31.4 12-8.3 24.3-6.3 24.3-6.3.3-6.6 0-13.4-9.7-25.7 4-12.9.3-23.1.3-23.1 16-8.9 27.7-25.2 30-44.6 3.7-32-19.4-61.1-51.4-64.8-22.8-2.6-45.1 7.9-56.1 26.5-23.9 41.4 1.4 73.2 23.1 84-14.9-1.4-35.4-12.3-41.4-35.4-6.8-26.5 2.9-51.4 9.2-63.4 0 0-4.5-6-8.3-9.2 0 0-14.2 0-25.4 5.5 12.3-15.7 26-14.9 26-14.9 0-6.6-.6-15.4-3.7-22.3-5.6-11.4-24.6-13.3-32.7 2.9.1-.2.3-.4.4-.5-5.2 12.3-1.1 57.7 17.4 90-2.6 1.4-9.4 6.3-13.4 10.3-22.3 10-58 62.2-58 62.2-29.1 11.1-79.7 52.5-72.9 82.3.3 3.1 1.4 5.7 3.1 7.7-2.9 2.3-5.7 5.2-8.6 8.6-12.3 14.2-5.5 36.3 18.3 25.2 16.3-7.4 30.6-20.9 37.5-31.4 0 0-5.7-5.2-16.8-4.5 28.6-6.8 35.4-9.7 47.7-9.4 8.3 4 8.3-35.4 8.3-35.4 0-15.2-2.3-32-11.5-42.8 12.9 12.6 30 33.8 28.9 62.6-.8 18.9-15.7 23.7-15.7 23.7-9.4 17.1-44.6 68-31.4 109.4 0 0-10-15.4-10.5-22.8-18 20-48 54-25.4 66.6 27.5 15.2 112.3-91.5 130.3-146.9 35.7-21.5 57.2-48.8 66-67.1C362 284 437.7 336.6 443.7 300"/></svg> </a> Документация Grav CMS на русском </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Основы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Основы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../basics/what-is-grav/ class=md-nav__link> <span class=md-ellipsis> Что такое Grav? </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/requirements/ class=md-nav__link> <span class=md-ellipsis> Требования </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/installation/ class=md-nav__link> <span class=md-ellipsis> Установка </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/basic-tutorial/ class=md-nav__link> <span class=md-ellipsis> Краткое руководство </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/grav-configuration/ class=md-nav__link> <span class=md-ellipsis> Настройка </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/folder-structure/ class=md-nav__link> <span class=md-ellipsis> Структура папок </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/getting-help/ class=md-nav__link> <span class=md-ellipsis> Получение помощи </span> </a> </li> <li class=md-nav__item> <a href=../../../basics/updates/ class=md-nav__link> <span class=md-ellipsis> Обновление Grav и плагинов </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Контент </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Контент </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../content/content-pages/ class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=../../../content/headers/ class=md-nav__link> <span class=md-ellipsis> Заголовки / Frontmatter </span> </a> </li> <li class=md-nav__item> <a href=../../../content/collections/ class=md-nav__link> <span class=md-ellipsis> Коллекции страниц </span> </a> </li> <li class=md-nav__item> <a href=../../../content/markdown/ class=md-nav__link> <span class=md-ellipsis> Синтаксис Markdown </span> </a> </li> <li class=md-nav__item> <a href=../../../content/linking/ class=md-nav__link> <span class=md-ellipsis> Ссылки на страницы </span> </a> </li> <li class=md-nav__item> <a href=../../../content/image-linking/ class=md-nav__link> <span class=md-ellipsis> Ссылки на изображения </span> </a> </li> <li class=md-nav__item> <a href=../../../content/media/ class=md-nav__link> <span class=md-ellipsis> Медиа </span> </a> </li> <li class=md-nav__item> <a href=../../../content/taxonomy/ class=md-nav__link> <span class=md-ellipsis> Таксономия </span> </a> </li> <li class=md-nav__item> <a href=../../../content/modular/ class=md-nav__link> <span class=md-ellipsis> Модульные страницы </span> </a> </li> <li class=md-nav__item> <a href=../../../content/routing/ class=md-nav__link> <span class=md-ellipsis> Маршрутизация </span> </a> </li> <li class=md-nav__item> <a href=../../../content/multi-language/ class=md-nav__link> <span class=md-ellipsis> Мультиязычность </span> </a> </li> <li class=md-nav__item> <a href=../../../content/content-types/ class=md-nav__link> <span class=md-ellipsis> Типы контента </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Темы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Темы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../themes/theme-basics/ class=md-nav__link> <span class=md-ellipsis> Основы тем </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/theme-tutorial/ class=md-nav__link> <span class=md-ellipsis> Учебник по темам </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/twig-primer/ class=md-nav__link> <span class=md-ellipsis> Шаблонизатор Twig </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> Теги, фильтры и функции Twig </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Теги, фильтры и функции Twig </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../themes/twig-tags-filters-functions/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/twig-tags-filters-functions/tags/ class=md-nav__link> <span class=md-ellipsis> Теги Twig </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/twig-tags-filters-functions/filters/ class=md-nav__link> <span class=md-ellipsis> Фильтры Twig </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/twig-tags-filters-functions/functions/ class=md-nav__link> <span class=md-ellipsis> Функции Twig </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../themes/theme-configuration/ class=md-nav__link> <span class=md-ellipsis> Конфигурация темы </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/theme-vars/ class=md-nav__link> <span class=md-ellipsis> Переменные темы </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/asset-manager/ class=md-nav__link> <span class=md-ellipsis> Менеджер активов </span> </a> </li> <li class=md-nav__item> <a href=../../../themes/customization/ class=md-nav__link> <span class=md-ellipsis> Кастомизация </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Плагины </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Плагины </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../plugins/plugin-basics/ class=md-nav__link> <span class=md-ellipsis> Основы плагинов </span> </a> </li> <li class=md-nav__item> <a href=../../../plugins/plugin-install/ class=md-nav__link> <span class=md-ellipsis> Установка плагинов </span> </a> </li> <li class=md-nav__item> <a href=../../../plugins/plugin-tutorial/ class=md-nav__link> <span class=md-ellipsis> Создание плагинов </span> </a> </li> <li class=md-nav__item> <a href=../../../plugins/event-hooks/ class=md-nav__link> <span class=md-ellipsis> Хуки событий </span> </a> </li> <li class=md-nav__item> <a href=../../../plugins/grav-lifecycle/ class=md-nav__link> <span class=md-ellipsis> Жизненный цикл Grav </span> </a> </li> <li class=md-nav__item> <a href=../../../plugins/plugin-flex/ class=md-nav__link> <span class=md-ellipsis> Использование Flex в плагинах </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Админка </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Админка </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/introduction/ class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_2> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0> <span class=md-ellipsis> Дашборд </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_2_label aria-expanded=false> <label class=md-nav__title for=__nav_6_2> <span class="md-nav__icon md-icon"></span> Дашборд </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/dashboard/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/dashboard/configuration-system/ class=md-nav__link> <span class=md-ellipsis> Настройка (система) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/dashboard/configuration-site/ class=md-nav__link> <span class=md-ellipsis> Настройка (сайт) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/dashboard/profile/ class=md-nav__link> <span class=md-ellipsis> Профиль </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> Учётные записи и группы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Учётные записи и группы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/accounts/users/ class=md-nav__link> <span class=md-ellipsis> Учётные записи </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/accounts/groups/ class=md-nav__link> <span class=md-ellipsis> Группы пользователей </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/accounts/configuration/ class=md-nav__link> <span class=md-ellipsis> Настройка </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/accounts/permissions/ class=md-nav__link> <span class=md-ellipsis> Разрешения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_4> <label class=md-nav__link for=__nav_6_4 id=__nav_6_4_label tabindex=0> <span class=md-ellipsis> Страницы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_4_label aria-expanded=false> <label class=md-nav__title for=__nav_6_4> <span class="md-nav__icon md-icon"></span> Страницы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/page/ class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/editor/ class=md-nav__link> <span class=md-ellipsis> Редактор (содержание) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/options/ class=md-nav__link> <span class=md-ellipsis> Редактор (опции) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/advanced/ class=md-nav__link> <span class=md-ellipsis> Редактор (экспертный) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/security/ class=md-nav__link> <span class=md-ellipsis> Редактор (безопасность) </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/configuration/ class=md-nav__link> <span class=md-ellipsis> Настройка </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/page/permissions/ class=md-nav__link> <span class=md-ellipsis> Разрешения страницы </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_5> <label class=md-nav__link for=__nav_6_5 id=__nav_6_5_label tabindex=0> <span class=md-ellipsis> Плагины </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_5_label aria-expanded=false> <label class=md-nav__title for=__nav_6_5> <span class="md-nav__icon md-icon"></span> Плагины </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/plugins/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/plugins/options/ class=md-nav__link> <span class=md-ellipsis> Параметры </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../admin-panel/themes/ class=md-nav__link> <span class=md-ellipsis> Темы </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_7> <label class=md-nav__link for=__nav_6_7 id=__nav_6_7_label tabindex=0> <span class=md-ellipsis> Безопасность </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_7_label aria-expanded=false> <label class=md-nav__title for=__nav_6_7> <span class="md-nav__icon md-icon"></span> Безопасность </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/security/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/security/2fa/ class=md-nav__link> <span class=md-ellipsis> Двухфакторная аутентификация </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/security/rate-limiting/ class=md-nav__link> <span class=md-ellipsis> Защита от флуда </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../admin-panel/tools/ class=md-nav__link> <span class=md-ellipsis> Сервис </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_9> <label class=md-nav__link for=__nav_6_9 id=__nav_6_9_label tabindex=0> <span class=md-ellipsis> Расширение админки </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_9_label aria-expanded=false> <label class=md-nav__title for=__nav_6_9> <span class="md-nav__icon md-icon"></span> Расширение админки </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../admin-panel/extending/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../admin-panel/extending/admin-events/ class=md-nav__link> <span class=md-ellipsis> Хуки событий админки </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../admin-panel/faq/ class=md-nav__link> <span class=md-ellipsis> ЧаВо </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Формы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Формы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../forms/ class=md-nav__link> <span class=md-ellipsis> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Чертежи </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Чертежи </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../forms/blueprints/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/fields-available/ class=md-nav__link> <span class=md-ellipsis> Чертеж полей формы </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/example-plugin-blueprint/ class=md-nav__link> <span class=md-ellipsis> Чертеж плагина </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/example-plugin-configuration/ class=md-nav__link> <span class=md-ellipsis> Конфигурация плагина </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/example-page-blueprint/ class=md-nav__link> <span class=md-ellipsis> Чертежи страниц </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/example-config-blueprints/ class=md-nav__link> <span class=md-ellipsis> Чертежи конфигурации </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/how-to-add-file-upload/ class=md-nav__link> <span class=md-ellipsis> Как добавить поле для загрузки файлов </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/blueprints/advanced-features/ class=md-nav__link> <span class=md-ellipsis> Расширенные возможности чертежей </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> <span class=md-ellipsis> Фронтенд-формы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> Фронтенд-формы </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../forms/forms/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/form-options/ class=md-nav__link> <span class=md-ellipsis> Параметры формы </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/fields-available/ class=md-nav__link> <span class=md-ellipsis> Индекс поля формы </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/example-form/ class=md-nav__link> <span class=md-ellipsis> Контактная форма </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/reference-form-actions/ class=md-nav__link> <span class=md-ellipsis> Действия формы </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/how-to-forms-in-modular-pages/ class=md-nav__link> <span class=md-ellipsis> Как разместить формы на модульных страницах </span> </a> </li> <li class=md-nav__item> <a href=../../../forms/forms/how-to-ajax-submission/ class=md-nav__link> <span class=md-ellipsis> Как сделать отправку через Ajax </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Консоль CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Консоль CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cli-console/command-line-intro/ class=md-nav__link> <span class=md-ellipsis> Введение в командную строку </span> </a> </li> <li class=md-nav__item> <a href=../../../cli-console/grav-cli/ class=md-nav__link> <span class=md-ellipsis> Команды Grav </span> </a> </li> <li class=md-nav__item> <a href=../../../cli-console/grav-cli-plugin/ class=md-nav__link> <span class=md-ellipsis> Команды плагинов </span> </a> </li> <li class=md-nav__item> <a href=../../../cli-console/grav-cli-gpm/ class=md-nav__link> <span class=md-ellipsis> Команды GPM </span> </a> </li> <li class=md-nav__item> <a href=../../../cli-console/scripted-upgrades/ class=md-nav__link> <span class=md-ellipsis> Обновления по сценарию </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9 checked> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Дополнительно </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=true> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Дополнительно </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1> <label class=md-nav__link for=__nav_9_1 id=__nav_9_1_label tabindex=0> <span class=md-ellipsis> Объекты Flex </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_1_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1> <span class="md-nav__icon md-icon"></span> Объекты Flex </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../flex/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1_2> <label class=md-nav__link for=__nav_9_1_2 id=__nav_9_1_2_label tabindex=0> <span class=md-ellipsis> Управление </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_1_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1_2> <span class="md-nav__icon md-icon"></span> Управление </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../flex/administration/ class=md-nav__link> <span class=md-ellipsis> Управление </span> </a> </li> <li class=md-nav__item> <a href=../../flex/administration/introduction/ class=md-nav__link> <span class=md-ellipsis> Первые шаги </span> </a> </li> <li class=md-nav__item> <a href=../../flex/administration/views-list/ class=md-nav__link> <span class=md-ellipsis> Список контента </span> </a> </li> <li class=md-nav__item> <a href=../../flex/administration/views-edit/ class=md-nav__link> <span class=md-ellipsis> Редактор контента </span> </a> </li> <li class=md-nav__item> <a href=../../flex/administration/configuration/ class=md-nav__link> <span class=md-ellipsis> Настройка </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1_3> <label class=md-nav__link for=__nav_9_1_3 id=__nav_9_1_3_label tabindex=0> <span class=md-ellipsis> Использование объектов Flex </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_1_3_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1_3> <span class="md-nav__icon md-icon"></span> Использование объектов Flex </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../flex/using/ class=md-nav__link> <span class=md-ellipsis> Использование объектов Flex </span> </a> </li> <li class=md-nav__item> <a href=../../flex/using/flex/ class=md-nav__link> <span class=md-ellipsis> Flex </span> </a> </li> <li class=md-nav__item> <a href=../../flex/using/directory/ class=md-nav__link> <span class=md-ellipsis> Каталог Flex </span> </a> </li> <li class=md-nav__item> <a href=../../flex/using/collection/ class=md-nav__link> <span class=md-ellipsis> Коллекция Flex </span> </a> </li> <li class=md-nav__item> <a href=../../flex/using/object/ class=md-nav__link> <span class=md-ellipsis> Объект Flex </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_1_4> <label class=md-nav__link for=__nav_9_1_4 id=__nav_9_1_4_label tabindex=0> <span class=md-ellipsis> Пользовательские типы каталогов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_9_1_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_1_4> <span class="md-nav__icon md-icon"></span> Пользовательские типы каталогов </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../flex/custom-types/ class=md-nav__link> <span class=md-ellipsis> Пользовательские типы каталогов </span> </a> </li> <li class=md-nav__item> <a href=../../flex/custom-types/blueprint/ class=md-nav__link> <span class=md-ellipsis> Чертёж </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_2> <label class=md-nav__link for=__nav_9_2 id=__nav_9_2_label tabindex=0> <span class=md-ellipsis> Производительность и кэширование </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_2_label aria-expanded=false> <label class=md-nav__title for=__nav_9_2> <span class="md-nav__icon md-icon"></span> Производительность и кэширование </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../performance-and-caching/ class=md-nav__link> <span class=md-ellipsis> Производительность и кэширование </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_3> <label class=md-nav__link for=__nav_9_3 id=__nav_9_3_label tabindex=0> <span class=md-ellipsis> Отладка и ведение журнала </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_3_label aria-expanded=false> <label class=md-nav__title for=__nav_9_3> <span class="md-nav__icon md-icon"></span> Отладка и ведение журнала </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../debugging/ class=md-nav__link> <span class=md-ellipsis> Отладка и ведение журнала </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_4> <label class=md-nav__link for=__nav_9_4 id=__nav_9_4_label tabindex=0> <span class=md-ellipsis> Конфигурация окружения </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_4_label aria-expanded=false> <label class=md-nav__title for=__nav_9_4> <span class="md-nav__icon md-icon"></span> Конфигурация окружения </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../environment-config/ class=md-nav__link> <span class=md-ellipsis> Конфигурация окружения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_5> <label class=md-nav__link for=__nav_9_5 id=__nav_9_5_label tabindex=0> <span class=md-ellipsis> Настройка мультисайта </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_5_label aria-expanded=false> <label class=md-nav__title for=__nav_9_5> <span class="md-nav__icon md-icon"></span> Настройка мультисайта </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../multisite-setup/ class=md-nav__link> <span class=md-ellipsis> Настройка мультисайта </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_6> <label class=md-nav__link for=__nav_9_6 id=__nav_9_6_label tabindex=0> <span class=md-ellipsis> Приоритезация плагинов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_6_label aria-expanded=false> <label class=md-nav__title for=__nav_9_6> <span class="md-nav__icon md-icon"></span> Приоритезация плагинов </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../plugin-prioritization/ class=md-nav__link> <span class=md-ellipsis> Приоритезация плагинов </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_7> <label class=md-nav__link for=__nav_9_7 id=__nav_9_7_label tabindex=0> <span class=md-ellipsis> Планировщик </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_7_label aria-expanded=false> <label class=md-nav__title for=__nav_9_7> <span class="md-nav__icon md-icon"></span> Планировщик </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scheduler/ class=md-nav__link> <span class=md-ellipsis> Планировщик </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_8> <label class=md-nav__link for=__nav_9_8 id=__nav_9_8_label tabindex=0> <span class=md-ellipsis> Резервные копии </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_8_label aria-expanded=false> <label class=md-nav__title for=__nav_9_8> <span class="md-nav__icon md-icon"></span> Резервные копии </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../backups/ class=md-nav__link> <span class=md-ellipsis> Резервные копии </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_9 checked> <label class=md-nav__link for=__nav_9_9 id=__nav_9_9_label tabindex=0> <span class=md-ellipsis> Разработка Grav </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_9_label aria-expanded=true> <label class=md-nav__title for=__nav_9_9> <span class="md-nav__icon md-icon"></span> Разработка Grav </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Разработка Grav </span> </a> </li> <li class=md-nav__item> <a href=../grav-15-upgrade-guide/ class=md-nav__link> <span class=md-ellipsis> Руководство по обновлению Grav с версии меньше 1.6 </span> </a> </li> <li class=md-nav__item> <a href=../grav-16-upgrade-guide/ class=md-nav__link> <span class=md-ellipsis> Руководство по обновлению до Grav 1.6 </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Руководство по обновлению до Grav 1.7 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Руководство по обновлению до Grav 1.7 </span> </a> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#naibolee-chastye-problemy class=md-nav__link> <span class=md-ellipsis> Наиболее частые проблемы </span> </a> <nav class=md-nav aria-label="Наиболее частые проблемы"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#html-otobrazhaetsia-na-vashem-saite-kak-kod-a-ne-kak-html-kak-predpolagalos class=md-nav__link> <span class=md-ellipsis> HTML отображается на вашем сайте как код, а не как HTML, как предполагалось. </span> </a> </li> <li class=md-nav__item> <a href=#poluchenie-oshibok-o-nedopustimom-yaml class=md-nav__link> <span class=md-ellipsis> Получение ошибок о недопустимом YAML. </span> </a> </li> <li class=md-nav__item> <a href=#adminka-otobrazhaetsia-s-neperevedennymi-strokami class=md-nav__link> <span class=md-ellipsis> Админка отображается с непереведенными строками </span> </a> </li> <li class=md-nav__item> <a href=#oshibki-pri-sokhranenii-ili-nerabotaiushchie-plaginy-adminki class=md-nav__link> <span class=md-ellipsis> Ошибки при сохранении или неработающие плагины админки. </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-stranits-perestaiut-rabotat-ili-vydaiut-oshibku-o-tsikle class=md-nav__link> <span class=md-ellipsis> Чертежи страниц перестают работать или выдают ошибку о цикле </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rukovodstvo-po-bystromu-obnovleniiu class=md-nav__link> <span class=md-ellipsis> Руководство по быстрому обновлению </span> </a> </li> <li class=md-nav__item> <a href=#yaml class=md-nav__link> <span class=md-ellipsis> YAML </span> </a> </li> <li class=md-nav__item> <a href=#twig class=md-nav__link> <span class=md-ellipsis> Twig </span> </a> </li> <li class=md-nav__item> <a href=#formy class=md-nav__link> <span class=md-ellipsis> Формы </span> </a> <nav class=md-nav aria-label=Формы> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sredy-i-multisaity class=md-nav__link> <span class=md-ellipsis> Среды и мультисайты </span> </a> </li> <li class=md-nav__item> <a href=#uchetnye-zapisi class=md-nav__link> <span class=md-ellipsis> Учётные записи </span> </a> </li> <li class=md-nav__item> <a href=#stranitsy class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=#multiiazychnost class=md-nav__link> <span class=md-ellipsis> Мультиязычность </span> </a> </li> <li class=md-nav__item> <a href=#media class=md-nav__link> <span class=md-ellipsis> Медиа </span> </a> </li> <li class=md-nav__item> <a href=#cli class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=#konfiguratsiia class=md-nav__link> <span class=md-ellipsis> Конфигурация </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#razrabotchikam class=md-nav__link> <span class=md-ellipsis> РАЗРАБОТЧИКАМ </span> </a> <nav class=md-nav aria-label=РАЗРАБОТЧИКАМ> <ul class=md-nav__list> <li class=md-nav__item> <a href=#otladka class=md-nav__link> <span class=md-ellipsis> Отладка </span> </a> </li> <li class=md-nav__item> <a href=#ispolzovanie-avtozagruzchika-kompozera class=md-nav__link> <span class=md-ellipsis> Использование автозагрузчика композера </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-plaginov-tem-blueprints-yaml class=md-nav__link> <span class=md-ellipsis> Чертежи плагинов/тем (blueprints.yaml) </span> </a> </li> <li class=md-nav__item> <a href=#sessii class=md-nav__link> <span class=md-ellipsis> Сессии </span> </a> </li> <li class=md-nav__item> <a href=#kontrol-dostupa class=md-nav__link> <span class=md-ellipsis> Контроль доступа </span> </a> </li> <li class=md-nav__item> <a href=#stranitsy_1 class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=#media_1 class=md-nav__link> <span class=md-ellipsis> Медиа </span> </a> </li> <li class=md-nav__item> <a href=#markdown class=md-nav__link> <span class=md-ellipsis> Markdown </span> </a> </li> <li class=md-nav__item> <a href=#polzovateli class=md-nav__link> <span class=md-ellipsis> Пользователи </span> </a> </li> <li class=md-nav__item> <a href=#flex class=md-nav__link> <span class=md-ellipsis> Flex </span> </a> </li> <li class=md-nav__item> <a href=#multiiazychnost_1 class=md-nav__link> <span class=md-ellipsis> Мультиязычность </span> </a> </li> <li class=md-nav__item> <a href=#multisait class=md-nav__link> <span class=md-ellipsis> Мультисайт </span> </a> </li> <li class=md-nav__item> <a href=#serializatsiia class=md-nav__link> <span class=md-ellipsis> Сериализация </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi class=md-nav__link> <span class=md-ellipsis> Чертежи </span> </a> </li> <li class=md-nav__item> <a href=#sobytiia class=md-nav__link> <span class=md-ellipsis> События </span> </a> </li> <li class=md-nav__item> <a href=#javascript class=md-nav__link> <span class=md-ellipsis> JavaScript </span> </a> </li> <li class=md-nav__item> <a href=#raznoe class=md-nav__link> <span class=md-ellipsis> Разное </span> </a> </li> <li class=md-nav__item> <a href=#cli_1 class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=#ispolzuemye-biblioteki class=md-nav__link> <span class=md-ellipsis> Используемые библиотеки </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#plaginy class=md-nav__link> <span class=md-ellipsis> ПЛАГИНЫ </span> </a> <nav class=md-nav aria-label=ПЛАГИНЫ> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adminka class=md-nav__link> <span class=md-ellipsis> Админка </span> </a> </li> <li class=md-nav__item> <a href=#iadro-shortkoda class=md-nav__link> <span class=md-ellipsis> Ядро шорткода </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ustranenie-voznikshikh-problem class=md-nav__link> <span class=md-ellipsis> Устранение возникших проблем </span> </a> <nav class=md-nav aria-label="Устранение возникших проблем"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#oshibka-shablon-flex-objects-html-twig-dlia-stranitsy-ne-naiden class=md-nav__link> <span class=md-ellipsis> ОШИБКА: Шаблон flex-objects.html.twig для страницы не найден </span> </a> </li> <li class=md-nav__item> <a href=#neperevedennaia-adminka class=md-nav__link> <span class=md-ellipsis> Непереведённая админка </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-stranits-perestaiut-rabotat-v-adminke class=md-nav__link> <span class=md-ellipsis> Чертежи страниц перестают работать в админке </span> </a> </li> <li class=md-nav__item> <a href=#oshibka-loop-detected-while-extending-blueprint-file class=md-nav__link> <span class=md-ellipsis> Ошибка: Loop detected while extending blueprint file </span> </a> </li> <li class=md-nav__item> <a href=#otsutstvuiut-stili-css-v-adminke class=md-nav__link> <span class=md-ellipsis> Отсутствуют стили CSS в админке </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vozvrat-k-poslednei-versii-grav-1-6 class=md-nav__link> <span class=md-ellipsis> Возврат к последней версии Grav 1.6 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_10> <label class=md-nav__link for=__nav_9_10 id=__nav_9_10_label tabindex=0> <span class=md-ellipsis> Синтаксис YAML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_10_label aria-expanded=false> <label class=md-nav__title for=__nav_9_10> <span class="md-nav__icon md-icon"></span> Синтаксис YAML </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../yaml/ class=md-nav__link> <span class=md-ellipsis> Синтаксис YAML </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_11> <label class=md-nav__link for=__nav_9_11 id=__nav_9_11_label tabindex=0> <span class=md-ellipsis> Группы и разрешения </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_11_label aria-expanded=false> <label class=md-nav__title for=__nav_9_11> <span class="md-nav__icon md-icon"></span> Группы и разрешения </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../groups-and-permissions/ class=md-nav__link> <span class=md-ellipsis> Группы и разрешения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9_12> <label class=md-nav__link for=__nav_9_12 id=__nav_9_12_label tabindex=0> <span class=md-ellipsis> Изменение URL-адреса сайта </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_9_12_label aria-expanded=false> <label class=md-nav__title for=__nav_9_12> <span class="md-nav__icon md-icon"></span> Изменение URL-адреса сайта </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../change-site-url/ class=md-nav__link> <span class=md-ellipsis> Изменение URL-адреса сайта </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Веб-серверы и хостинг </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Веб-серверы и хостинг </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../webservers-hosting/servers/grav-built-in/ class=md-nav__link> <span class=md-ellipsis> Встроенный веб-сервер Grav </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/servers/nginx/ class=md-nav__link> <span class=md-ellipsis> Nginx </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/vps/generic/ class=md-nav__link> <span class=md-ellipsis> Универсальная установка VPS </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/vps/ubuntu-18.04/ class=md-nav__link> <span class=md-ellipsis> Установка VPS на Ubuntu 18.04 </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/local-development-with-ddev/ class=md-nav__link> <span class=md-ellipsis> Локальная разработка с ddev </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/deploying-with-git/ class=md-nav__link> <span class=md-ellipsis> Развёртывание с помощью Git </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/php-built-in-web-server/ class=md-nav__link> <span class=md-ellipsis> Тестовый хостинг со встроенным веб-сервером PHP </span> </a> </li> <li class=md-nav__item> <a href=../../../webservers-hosting/windows-subsystem-for-linux/ class=md-nav__link> <span class=md-ellipsis> Подсистема Windows для Linux </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> Сборник рецептов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Сборник рецептов </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cookbook/general-recipes/ class=md-nav__link> <span class=md-ellipsis> Общие рецепты </span> </a> </li> <li class=md-nav__item> <a href=../../../cookbook/twig-recipes/ class=md-nav__link> <span class=md-ellipsis> Рецепты Twig </span> </a> </li> <li class=md-nav__item> <a href=../../../cookbook/plugin-recipes/ class=md-nav__link> <span class=md-ellipsis> Рецепты плагинов </span> </a> </li> <li class=md-nav__item> <a href=../../../cookbook/admin-recipes/ class=md-nav__link> <span class=md-ellipsis> Рецепты админки </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_11_5> <label class=md-nav__link for=__nav_11_5 id=__nav_11_5_label tabindex=0> <span class=md-ellipsis> Создание блога </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_11_5_label aria-expanded=false> <label class=md-nav__title for=__nav_11_5> <span class="md-nav__icon md-icon"></span> Создание блога </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cookbook/tutorials/create-a-blog/ class=md-nav__link> <span class=md-ellipsis> Создание блога </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex=0> <span class=md-ellipsis> Решение проблем </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Решение проблем </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../troubleshooting/common-problems/ class=md-nav__link> <span class=md-ellipsis> Общие проблемы </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/page-not-found/ class=md-nav__link> <span class=md-ellipsis> Страница не найдена — 404 </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/server-error/ class=md-nav__link> <span class=md-ellipsis> Ошибка сервера </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/internal-server-error/ class=md-nav__link> <span class=md-ellipsis> Внутренняя ошибка сервера — 500 </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/forbidden/ class=md-nav__link> <span class=md-ellipsis> Доступ запрещён — 403 </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/invalid-security-token/ class=md-nav__link> <span class=md-ellipsis> Неверный токен безопасности </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/permissions/ class=md-nav__link> <span class=md-ellipsis> Разрешения </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/proxy/ class=md-nav__link> <span class=md-ellipsis> Проблемы с прокси </span> </a> </li> <li class=md-nav__item> <a href=../../../troubleshooting/htaccess/ class=md-nav__link> <span class=md-ellipsis> .htaccess </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://learn.getgrav.org/migration class=md-nav__link> <span class=md-ellipsis> Переезд с других движков </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_14> <label class=md-nav__link for=__nav_14 id=__nav_14_label tabindex=0> <span class=md-ellipsis> Политики безопасности </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_14_label aria-expanded=false> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Политики безопасности </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../security/overview/ class=md-nav__link> <span class=md-ellipsis> Обзор </span> </a> </li> <li class=md-nav__item> <a href=../../../security/configuration/ class=md-nav__link> <span class=md-ellipsis> Рекомендуемая конфигурация </span> </a> </li> <li class=md-nav__item> <a href=../../../security/users/ class=md-nav__link> <span class=md-ellipsis> Пользователям </span> </a> </li> <li class=md-nav__item> <a href=../../../security/developers/ class=md-nav__link> <span class=md-ellipsis> Разработчикам </span> </a> </li> <li class=md-nav__item> <a href=../../../security/server-side/ class=md-nav__link> <span class=md-ellipsis> На стороне сервера </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://learn.getgrav.org/api class=md-nav__link> <span class=md-ellipsis> API </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_16> <label class=md-nav__link for=__nav_16 id=__nav_16_label tabindex=0> <span class=md-ellipsis> Лайфхаки </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_16_label aria-expanded=false> <label class=md-nav__title for=__nav_16> <span class="md-nav__icon md-icon"></span> Лайфхаки </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../hints-tips/metadata/ class=md-nav__link> <span class=md-ellipsis> Метаданные блогов </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label=Содержание> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#naibolee-chastye-problemy class=md-nav__link> <span class=md-ellipsis> Наиболее частые проблемы </span> </a> <nav class=md-nav aria-label="Наиболее частые проблемы"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#html-otobrazhaetsia-na-vashem-saite-kak-kod-a-ne-kak-html-kak-predpolagalos class=md-nav__link> <span class=md-ellipsis> HTML отображается на вашем сайте как код, а не как HTML, как предполагалось. </span> </a> </li> <li class=md-nav__item> <a href=#poluchenie-oshibok-o-nedopustimom-yaml class=md-nav__link> <span class=md-ellipsis> Получение ошибок о недопустимом YAML. </span> </a> </li> <li class=md-nav__item> <a href=#adminka-otobrazhaetsia-s-neperevedennymi-strokami class=md-nav__link> <span class=md-ellipsis> Админка отображается с непереведенными строками </span> </a> </li> <li class=md-nav__item> <a href=#oshibki-pri-sokhranenii-ili-nerabotaiushchie-plaginy-adminki class=md-nav__link> <span class=md-ellipsis> Ошибки при сохранении или неработающие плагины админки. </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-stranits-perestaiut-rabotat-ili-vydaiut-oshibku-o-tsikle class=md-nav__link> <span class=md-ellipsis> Чертежи страниц перестают работать или выдают ошибку о цикле </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rukovodstvo-po-bystromu-obnovleniiu class=md-nav__link> <span class=md-ellipsis> Руководство по быстрому обновлению </span> </a> </li> <li class=md-nav__item> <a href=#yaml class=md-nav__link> <span class=md-ellipsis> YAML </span> </a> </li> <li class=md-nav__item> <a href=#twig class=md-nav__link> <span class=md-ellipsis> Twig </span> </a> </li> <li class=md-nav__item> <a href=#formy class=md-nav__link> <span class=md-ellipsis> Формы </span> </a> <nav class=md-nav aria-label=Формы> <ul class=md-nav__list> <li class=md-nav__item> <a href=#sredy-i-multisaity class=md-nav__link> <span class=md-ellipsis> Среды и мультисайты </span> </a> </li> <li class=md-nav__item> <a href=#uchetnye-zapisi class=md-nav__link> <span class=md-ellipsis> Учётные записи </span> </a> </li> <li class=md-nav__item> <a href=#stranitsy class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=#multiiazychnost class=md-nav__link> <span class=md-ellipsis> Мультиязычность </span> </a> </li> <li class=md-nav__item> <a href=#media class=md-nav__link> <span class=md-ellipsis> Медиа </span> </a> </li> <li class=md-nav__item> <a href=#cli class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=#konfiguratsiia class=md-nav__link> <span class=md-ellipsis> Конфигурация </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#razrabotchikam class=md-nav__link> <span class=md-ellipsis> РАЗРАБОТЧИКАМ </span> </a> <nav class=md-nav aria-label=РАЗРАБОТЧИКАМ> <ul class=md-nav__list> <li class=md-nav__item> <a href=#otladka class=md-nav__link> <span class=md-ellipsis> Отладка </span> </a> </li> <li class=md-nav__item> <a href=#ispolzovanie-avtozagruzchika-kompozera class=md-nav__link> <span class=md-ellipsis> Использование автозагрузчика композера </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-plaginov-tem-blueprints-yaml class=md-nav__link> <span class=md-ellipsis> Чертежи плагинов/тем (blueprints.yaml) </span> </a> </li> <li class=md-nav__item> <a href=#sessii class=md-nav__link> <span class=md-ellipsis> Сессии </span> </a> </li> <li class=md-nav__item> <a href=#kontrol-dostupa class=md-nav__link> <span class=md-ellipsis> Контроль доступа </span> </a> </li> <li class=md-nav__item> <a href=#stranitsy_1 class=md-nav__link> <span class=md-ellipsis> Страницы </span> </a> </li> <li class=md-nav__item> <a href=#media_1 class=md-nav__link> <span class=md-ellipsis> Медиа </span> </a> </li> <li class=md-nav__item> <a href=#markdown class=md-nav__link> <span class=md-ellipsis> Markdown </span> </a> </li> <li class=md-nav__item> <a href=#polzovateli class=md-nav__link> <span class=md-ellipsis> Пользователи </span> </a> </li> <li class=md-nav__item> <a href=#flex class=md-nav__link> <span class=md-ellipsis> Flex </span> </a> </li> <li class=md-nav__item> <a href=#multiiazychnost_1 class=md-nav__link> <span class=md-ellipsis> Мультиязычность </span> </a> </li> <li class=md-nav__item> <a href=#multisait class=md-nav__link> <span class=md-ellipsis> Мультисайт </span> </a> </li> <li class=md-nav__item> <a href=#serializatsiia class=md-nav__link> <span class=md-ellipsis> Сериализация </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi class=md-nav__link> <span class=md-ellipsis> Чертежи </span> </a> </li> <li class=md-nav__item> <a href=#sobytiia class=md-nav__link> <span class=md-ellipsis> События </span> </a> </li> <li class=md-nav__item> <a href=#javascript class=md-nav__link> <span class=md-ellipsis> JavaScript </span> </a> </li> <li class=md-nav__item> <a href=#raznoe class=md-nav__link> <span class=md-ellipsis> Разное </span> </a> </li> <li class=md-nav__item> <a href=#cli_1 class=md-nav__link> <span class=md-ellipsis> CLI </span> </a> </li> <li class=md-nav__item> <a href=#ispolzuemye-biblioteki class=md-nav__link> <span class=md-ellipsis> Используемые библиотеки </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#plaginy class=md-nav__link> <span class=md-ellipsis> ПЛАГИНЫ </span> </a> <nav class=md-nav aria-label=ПЛАГИНЫ> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adminka class=md-nav__link> <span class=md-ellipsis> Админка </span> </a> </li> <li class=md-nav__item> <a href=#iadro-shortkoda class=md-nav__link> <span class=md-ellipsis> Ядро шорткода </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ustranenie-voznikshikh-problem class=md-nav__link> <span class=md-ellipsis> Устранение возникших проблем </span> </a> <nav class=md-nav aria-label="Устранение возникших проблем"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#oshibka-shablon-flex-objects-html-twig-dlia-stranitsy-ne-naiden class=md-nav__link> <span class=md-ellipsis> ОШИБКА: Шаблон flex-objects.html.twig для страницы не найден </span> </a> </li> <li class=md-nav__item> <a href=#neperevedennaia-adminka class=md-nav__link> <span class=md-ellipsis> Непереведённая админка </span> </a> </li> <li class=md-nav__item> <a href=#chertezhi-stranits-perestaiut-rabotat-v-adminke class=md-nav__link> <span class=md-ellipsis> Чертежи страниц перестают работать в админке </span> </a> </li> <li class=md-nav__item> <a href=#oshibka-loop-detected-while-extending-blueprint-file class=md-nav__link> <span class=md-ellipsis> Ошибка: Loop detected while extending blueprint file </span> </a> </li> <li class=md-nav__item> <a href=#otsutstvuiut-stili-css-v-adminke class=md-nav__link> <span class=md-ellipsis> Отсутствуют стили CSS в админке </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#vozvrat-k-poslednei-versii-grav-1-6 class=md-nav__link> <span class=md-ellipsis> Возврат к последней версии Grav 1.6 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <div><h1 id=rukovodstvo-po-obnovleniiu-do-grav-1-7>Руководство по обновлению до Grav 1.7<a class=headerlink href=#rukovodstvo-po-obnovleniiu-do-grav-1-7 title="Постоянная ссылка">⚓︎</a></h1> <p>Grav 1.7 представляет несколько новых функций, улучшений, исправлений ошибок и предоставляет множество архитектурных изменений, которые прокладывают путь к Grav 2.0. Вот несколько основных моментов:</p> <ul> <li><strong>Flex-объекты</strong>: Новый способ создания собственных типов данных.</li> <li><strong>Сервер Symfony</strong>: Запуск Grav без установки веб-сервера.</li> <li><strong>Улучшена поддержка нескольких языков</strong>: Админка получила улучшение поддержки нескольких языков.</li> <li><strong>Улучшена поддержка нескольких сайтов</strong>: Админка получила улучшение поддержки нескольких сайтов.</li> <li><strong>Улучшена ACL админки</strong>: Полная поддержка CRUD для пользователей и страниц.</li> <li><strong>Улучшена поддержка медиа</strong>: Поддежка формата изображений <code>webp</code>, ленивая загрузка и многое другое.</li> <li><strong>Улучшено кэширование</strong>: Новый тег <code>{% cache %}</code> и улучшение производительности, особенно в админке.</li> <li><strong>Обнаружение XSS в формах</strong>: Формы не будут отправлены, если в них обнаружен потенциальный XSS. См. <a href=/forms/forms/form-options/#proverka-xss>документацию</a> о том, как отключить проверки.</li> <li><strong>Лучшие инструменты отладки</strong>: интеграция <a href=https://underground.works/clockwork/ >Clockwork</a>, профилирование Twig и поддержка <a href=https://github.com/tideways/php-xhprof-extension>Tideways XHProf</a> — расширения для профилирования PHP.</li> </ul> <div class="admonition danger"> <p>Для большинства людей Grav 1.7 должно быть простым обновлением без каких-либо проблем, но, как и любое обновление, рекомендуется <strong>сделать резервную копию</strong> вашего сайта и <strong>протестировать обновление в тестовой среде</strong> перед обновлением вашего действующего сайта.</p> </div> <h3 id=naibolee-chastye-problemy>Наиболее частые проблемы<a class=headerlink href=#naibolee-chastye-problemy title="Постоянная ссылка">⚓︎</a></h3> <ol> <li> <h4 id=html-otobrazhaetsia-na-vashem-saite-kak-kod-a-ne-kak-html-kak-predpolagalos>HTML отображается на вашем сайте как <strong>код</strong>, а не как HTML, как предполагалось.<a class=headerlink href=#html-otobrazhaetsia-na-vashem-saite-kak-kod-a-ne-kak-html-kak-predpolagalos title="Постоянная ссылка">⚓︎</a></h4> <p>Такое поведение является результатом нового значения по умолчанию <strong>auto-escaping</strong>, которое истинно в Grav 1.7. Это усиление безопасности, и если вы обновляетесь с версии до 1.7, мы автоматически включаем параметр <strong>Совместимость с Twig</strong> в конфигурации системы, чтобы ваш старый код Twig продолжал работать. Если вы вручную обновляете сайт до 1.7 или обновляете каким-либо способом, который не проходит через процесс самостоятельного обновления GPM, вам следует установить этот параметр самостоятельно.</p> <p>Ознакомьтесь с секцией <a href=#twig>Twig</a> этого руководства для получения полной информации...</p> </li> <li> <h4 id=poluchenie-oshibok-o-nedopustimom-yaml>Получение ошибок о недопустимом YAML.<a class=headerlink href=#poluchenie-oshibok-o-nedopustimom-yaml title="Постоянная ссылка">⚓︎</a></h4> <p>Поскольку мы обновились до более новой версии фреймворка Symfony, синтаксический анализатор YAML стал строже, чем в версиях до 1.7.Чтобы справиться с этим, мы включили старую версию парсера, которая доступна при включении параметра <strong>Совместимость с Yaml</strong>. Это выполняется автоматически, если вы обновляетесь до Grav 1.7 через GPM, но если вы выполняли обновление вручную, вам нужно будет установить это значение самостоятельно.</p> <p>Ознакомьтесь с секцией <a href=#yaml>YAML</a> этого руководства для получения полной информации...</p> </li> <li> <h4 id=adminka-otobrazhaetsia-s-neperevedennymi-strokami>Админка отображается с непереведенными строками<a class=headerlink href=#adminka-otobrazhaetsia-s-neperevedennymi-strokami title="Постоянная ссылка">⚓︎</a></h4> </li> </ol> <p>Если в вашей админке где-нибудь отображаются непереведенные строки, скорее всего, это связано с тем, что вы ранее отключили функцию <strong>переводов</strong>. Это было ошибкой в предыдущих версиях Grav и отключение его, на самом деле не отключало переводы во всей админке, как это было задумано. Это <strong>исправлено</strong> в Grav 1.7, и этот параметр выполняет то, для чего он предназначен, показывает коды перевода в верхнем регистре, а не сами переведенные строки.</p> <p>Обратитесь к секции <a href=#ustranenie-voznikshikh-problem>Устранение возникших проблем</a> на этой странице.</p> <ol> <li> <h4 id=oshibki-pri-sokhranenii-ili-nerabotaiushchie-plaginy-adminki>Ошибки при сохранении или неработающие плагины админки.<a class=headerlink href=#oshibki-pri-sokhranenii-ili-nerabotaiushchie-plaginy-adminki title="Постоянная ссылка">⚓︎</a></h4> В Grav 1.7 мы представили <strong>Flex Pages</strong> в качестве нового пользовательского интерфейса управления страницами по умолчанию. Кроме того, для оптимизации производительности мы перестали инициализировать страницы при каждом вызове администратора. Возврат к обычным <strong>Grav Pages</strong> может временно решить вашу проблему. Это делается путем редактирования плагина <strong>Flex Objects</strong> и отключения <strong>Pages (Admin)</strong>.</li> </ol> <p>Чтобы должным образом решить эту проблему, пользовательские плагины должны быть обновлены для поддержки <strong>страниц Grav</strong> и <strong>страниц Flex</strong> с использованием <code>PageInterface</code>, а также должны быть явными Pages при необходимости.</p> <p>Ознакомьтесь с секцией <a href=#stranitsy>Страницы</a> и секцией <a href=#adminka>Админка</a> этого руководства для получения полной информации...</p> <p>Также были обнаружены некоторые специфические проблемы с плагинами. Обратитесь к секции <a href=#ustranenie-voznikshikh-problem>Устранение возникших проблем</a> на этой странице.</p> <ol> <li> <h4 id=chertezhi-stranits-perestaiut-rabotat-ili-vydaiut-oshibku-o-tsikle>Чертежи страниц перестают работать или выдают ошибку о цикле<a class=headerlink href=#chertezhi-stranits-perestaiut-rabotat-ili-vydaiut-oshibku-o-tsikle title="Постоянная ссылка">⚓︎</a></h4> <strong>Grav 1.7.8</strong> добавляет поддержку для определения любого <strong>чертежа</strong> в вашей теме. Это означает, что если у вас есть чертежи страниц в папке <code>blueprints/pages/</code>, то используются стандартные расположения чертежей, как и в плагинах. К сожалению, некоторые старые темы могут иметь смесь файлов в <code>blueprints/</code> и <code>blueprints/pages</code>, что нарушает определение и приводит либо к отсутствию полей в админке при редактировании страниц, либо к фатальной ошибке: <code>Loop detected while extending blueprint file</code>.</li> </ol> <p>При возникновении любой из этих ошибок обратитесь к секции <a href=#ustranenie-voznikshikh-problem>Устранение возникших проблем</a>.</p> <h3 id=rukovodstvo-po-bystromu-obnovleniiu>Руководство по быстрому обновлению<a class=headerlink href=#rukovodstvo-po-bystromu-obnovleniiu title="Постоянная ссылка">⚓︎</a></h3> <div class="admonition warning"> <p><strong>Grav 1.7</strong> требует <strong>PHP 7.3.6</strong> или выше. Рекомендуемая версия — <strong>PHP 7.4</strong>.</p> </div> <h3 id=yaml>YAML<a class=headerlink href=#yaml title="Постоянная ссылка">⚓︎</a></h3> <div class="admonition danger"> <p>Парсер Grav 1.7 YAML более строг, и ваш сайт может сломаться, если у вас есть синтаксические ошибки в ваших файлах конфигурации или заголовках страниц. Однако, если вы обновляете свой существующий сайт с помощью <code>bin/gpm</code> или <code>плагина админки</code>, процесс обновления сохраняет большую часть сломанного синтаксиса YAML.</p> </div> <p>Чтобы вернуться к старому поведению, вам необходимо убедиться, что у вас есть следующие настройки в <code>user/config/system.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>strict_mode</span><span class=p>:</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=nt>yaml_compat</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>или в админке в разделе <strong>Настройка</strong> → <strong>Дополнительно</strong> -&gt; <strong>Совместимость с YAML</strong></p> <p><a class=glightbox href=yaml-compat.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img alt="Совместимость с Yaml" src=yaml-compat.png></a></p> <div class="admonition tip"> <p><strong>Руководство по обновлению Grav 1.6</strong> имеет специальную секцию <strong><a href=../grav-16-upgrade-guide/#parsing-yaml>Парсинг YAML</a></strong>, чтобы помочь вам решить эти проблемы.</p> </div> <p>По умолчанию Grav 1.7 использует <strong>синтаксический анализатор YAML Symfony 4.4</strong>, который более точно соответствует <a href=https://yaml.org/spec>стандартной спецификации YAML</a>, чем более старые версии Grav. Это означает, что файлы YAML, которые раньше работали нормально, могут вызывать ошибки, связанные с недопустимым YAML. Тем не менее, Grav по умолчанию все равно будет использовать более старую версию парсера 3.4, чтобы ваш сайт продолжал работать.</p> <div class="admonition tip"> <p>Вам нужно запустить <strong>команду CLI</strong> <code>bin/grav yamllinter</code> или перейти в раздел <strong>Админка</strong> &gt; <strong>Сервис</strong> &gt; <strong>Отчёты</strong> до и после обновления и исправления всех предупреждений и ошибок, связанных с YAML.</p> </div> <h3 id=twig>Twig<a class=headerlink href=#twig title="Постоянная ссылка">⚓︎</a></h3> <div class="admonition danger"> <p>Grav 1.7 по умолчанию включает <strong>автоэкранирование Twig</strong>. Однако, если вы обновляете существующий сайт с помощью <code>bin/gpm</code> или <code>плагина админки</code>, процесс обновления сохраняет существующие настройки автоматического выхода.</p> </div> <p>Чтобы вернуться к старому поведению, вам необходимо убедиться, что у вас есть следующие настройки в <code>user/config/system.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=nt>twig</span><span class=p>:</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nt>autoescape</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=nt>strict_mode</span><span class=p>:</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nt>twig_compat</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>или в админке в разделе <strong>Настройка</strong> → <strong>Дополнительно</strong> -&gt; <strong>Совместимость с TWIG</strong></p> <p>И, пожалуйста, не забудьте очистить кэш после этого!</p> <p><a class=glightbox href=twig-compat.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img alt="Совместимость с Twig" src=twig-compat.png></a></p> <div class="admonition tip"> <p><strong>Руководство по обновлению Grav 1.6</strong> имеет специальную секцию <strong><a href=../grav-16-upgrade-guide/#twig>Twig</a></strong>. Обязательно с ней ознакомьтесь!</p> </div> <p>Шаблонизатор Twig обновлен до версии 1.43, но также поддерживает Twig 2.13. Чтобы поддерживать эту новую версию Twig, вам необходимо обновить любой старый синтаксис в ваших шаблонах Twig. <strong>Руководство по обновлению Grav 1.6</strong> поможет вам в этом.</p> <p>Дополнительные изменения в шаблонах:</p> <ul> <li>Добавлен новый тег Twig <code>{% cache %}</code>, устраняющий необходимость в расширении <code>twigcache</code>.</li> <li>Добавлена Twig-функция <code>array_diff()</code></li> <li>Добавлена Twig-функция <code>template_from_string()</code></li> <li>Добавлена Twig-функция <code>svg_image()</code> чтобы упростить включение исходного кода SVG в Twig</li> <li>Улучшена Twig-функция <code>url()</code>, принимающая третий параметр (<code>true</code>) чтобы вернуться URL-адрес несуществующего файла, вместо того, чтобы возвращать <code>false</code></li> <li>Улучшен Twig-фильтр <code>|array</code> для работы с итераторами и объектами с методом <code>toArray()</code></li> <li>Улучшена Twig-функция <code>authorize()</code> чтобы лучше работать с вложенными параметрами правил</li> <li>Улучшен Twig-фильтр <code>|yaml_serialize</code>: добавлена поддержка объектов <code>JsonSerializable</code> и других объектов, подобных массивам</li> <li>Добавлены шаблоны по умолчанию для <code>external.html.twig</code>, <code>default.html.twig</code> и <code>modular.html.twig</code></li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong>: Используйте <code>{% script 'file.js' at 'bottom' %}</code> вместо сломанного <code>in 'bottom'</code></li> </ul> <h2 id=formy>Формы<a class=headerlink href=#formy title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition danger"> <p>Grav 1.7 изменяет поведение <strong>строгой проверки</strong>. Однако, если вы обновляете существующий сайт с помощью <code>bin/gpm</code> или <code>плагина админки</code>, процесс обновления сохраняет существующее поведение в строгом режиме.</p> </div> <p><strong>Улучшения строгого режима</strong>: Внутри форм объявление <code>validation: strict</code> было не таким строгим, как мы надеялись, из-за ошибки. Строгий режим должен предотвращать отправку форм любых дополнительных полей, и это было исправлено в Grav 1.7. К сожалению, многие старые формы объявлены строгими, даже если в них есть дополнительные данные.</p> <p>Чтобы вернуться к старому поведению, вам необходимо убедиться, что у вас есть следующие настройки в<code>user/config/system.yaml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>strict_mode</span><span class=p>:</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nt>blueprint_compat</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p><strong>Обнаружение инъекции XSS</strong> теперь по умолчанию включено во всех формах интерфейса. См. <a href=/forms/forms/form-options/#proverka-xss>документацию</a> о том, как отключить или настроить проверки для каждой формы и поля.</p> <p>По этой причине мы добавили новую опцию конфигурации <code>system.strict_mode.blueprint_compat: true</code> для сохранения старого поведения <code>validation: strict</code>. Рекомендуется отключить этот параметр для повышения безопасности сайта, но перед этим выполните поиск по всем своим формам, если вы использовали функцию <code>validation: strict</code>. Если да, удалите строку или проверьте, работает ли форма.</p> <div class="admonition note"> <p>Этот резервный механизм обратной совместимости будет удален в Grav 2.0.</p> </div> <h3 id=sredy-i-multisaity>Среды и мультисайты<a class=headerlink href=#sredy-i-multisaity title="Постоянная ссылка">⚓︎</a></h3> <div class="admonition danger"> <p>Grav 1.7 перемещает <a href=/advanced/environment-config>настройки окружения</a> в папку <code>user://env</code>. Старое местоположение по-прежнему работает, но лучше переместить среду в одно местоположение, в будущем функции могут полагаться на него.</p> </div> <p>Grav 1.7 также добавляет поддержку <a href=/advanced/environment-config/#konfiguratsiia-sredy-na-osnove-servera>конфигурации среды на основе сервера</a> и <a href=/advanced/multisite-setup/#servernaia-mnogosaitovaia-konfiguratsiia>серверной многосайтовой конфигурации</a>. Эта функция пригодится, если вы хотите использовать, например, контейнеры докеров и хотите сделать их независимыми от домена, который вы используете. Или если вы не хотите хранить секреты в конфигурации, а хранить их в настройках вашего сервера.</p> <p>Кроме того, файл setup.php теперь может находиться либо в <code>GRAV_ROOT/setup.php</code>, либо в <code>GRAV_ROOT/GRAV_USER_PATH/setup.php</code>. Второе расположение упрощает использование сред с репозиториями git, содержащими только папку пользователя.</p> <h3 id=uchetnye-zapisi>Учётные записи<a class=headerlink href=#uchetnye-zapisi title="Постоянная ссылка">⚓︎</a></h3> <p>В админке теперь есть новое <a href=/admin-panel/accounts>управление учётными записями</a>, использующее <strong>Flex-пользователей</strong>:</p> <ul> <li><a href=/admin-panel/accounts/users>Менеджер учетных записей пользователей</a></li> <li><a href=/admin-panel/accounts/groups>Менеджер групп пользователей</a></li> </ul> <div class="admonition note"> <p>Функция Flex-пользователей ещё не используется во внешнем интерфейсе вашего сайта.</p> </div> <h3 id=stranitsy>Страницы<a class=headerlink href=#stranitsy title="Постоянная ссылка">⚓︎</a></h3> <p>Существующее <a href=/admin-panel/page>администрирование страниц</a> было значительно улучшено с <strong>Flex-страницами</strong>:</p> <ul> <li>Переработанный список: гораздо лучшая поддержка больших сайтов.</li> <li>Лучший контроль доступа: <a href=/admin-panel/page/permissions>CRUD ACL</a> поддержка владельцев страниц</li> <li>Лучшая многоязычная поддержка</li> </ul> <div class="admonition warning"> <p class=admonition-title>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</p> <p>Мы исправили ошибку 404 страницы, когда вы переходите на не маршрутизируемую страницу с маршрутизируемыми, видимыми дочерними страницами под ней. Теперь вы перенаправляетесь на первую маршрутизируемую, видимую дочернюю страницу. Это, вероятно, то, что вы хотели в первую очередь.</p> </div> <div class="admonition note"> <p>Функция Flex-страниц ещё не используется во внешнем интерфейсе вашего сайта.</p> </div> <h3 id=multiiazychnost>Мультиязычность<a class=headerlink href=#multiiazychnost title="Постоянная ссылка">⚓︎</a></h3> <p>Grav 1.7 изменил поведение того, как работают многоязычные резервные копии для страниц.</p> <p>Ранее, если страница не существовала с запрошенным языком, старая реализация искала следующий Поддерживаемый язык. Это означало, что непереведенная страница всегда отображалась, но страница могла использовать какой-то неизвестный читателю язык.</p> <p>Новое поведение — возврат только к языку сайта по умолчанию. Это поведение по умолчанию можно изменить, установив резервные языки для каждого языка с помощью параметра конфигурации <code>system.languages.content_fallback</code>.</p> <p>Если страница не существует ни на одном из резервных языков, вместо нее будет отображаться <strong>404 Not Found</strong>.</p> <div class="admonition warning"> <p class=admonition-title>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</p> <p>Пожалуйста, добавьте правильные резервные языки для содержимого страницы в <code>system.yaml</code> или в админке: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Языки</strong> &gt; <strong>Резервный язык содержимого</strong>.</p> </div> <h3 id=media>Медиа<a class=headerlink href=#media title="Постоянная ссылка">⚓︎</a></h3> <p>В Grav 1.7 значительно улучшена обработка мультимедиа. Некоторые основные моменты:</p> <ul> <li>Поддержка формата изображений <code>webp</code></li> <li>Markdown: добавлена ​​поддержка собственных атрибутов <code>loading=lazy</code> для изображений. Может быть установлена в <code>system.images.defaults</code> или как параметр в Markdown: <code>?loading=lazy</code></li> <li>Добавлена ​​возможность отключения обработки (<code>noprocess</code>) определённых элементов только в фрагментах ссылок/изображений, например <code>http://foo.com/page?id=foo&amp;target=_blank&amp;noprocess=id</code></li> </ul> <h3 id=cli>CLI<a class=headerlink href=#cli title="Постоянная ссылка">⚓︎</a></h3> <p>Некоторые основные моменты:</p> <ul> <li>Все команды интерфейса командной строки теперь принимают параметры <code>--env</code> и <code>--lang</code>, чтобы установить окружение и используемый язык соответственно (<code>-e</code> больше не работает).</li> <li>Добавлена ​​новая команда CLI <code>bin/grav server</code> для легкого запуска встроенных веб-серверов Symfony или PHP.</li> <li>Улучшенная проверка команды cron в <code>Scheduler</code> и более полезная информация из интерфейса командной строки.</li> <li>Добавлен новый параметр <code>-r &lt;job-id&gt;</code> для команды CLI планировщика для принудительного запуска задания.</li> <li>Улучшена команда CLI <code>bin/grav yamllinter</code>, добавлена ​​опция поиска проблем с линтингом YAML на всем сайте или в пользовательской папке.</li> <li>Ошибки команд CLI/GPM теперь возвращают ненулевой код (что позволяет обнаруживать ошибки в случае сбоя команды).</li> </ul> <h3 id=konfiguratsiia>Конфигурация<a class=headerlink href=#konfiguratsiia title="Постоянная ссылка">⚓︎</a></h3> <p>Добавлен новый параметр конфигурации для сохранения языка по умолчанию в файлах <code>.md</code>, если он установлен в <code>false</code>: * system.yaml: <code>languages.include_default_lang_file_extension</code>: <strong>true</strong>|false * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Языки</strong> &gt; <strong>Include default language in file extension</strong></p> <p>Добавлен новый параметр конфигурации, позволяющий устанавливать резервные языки содержимого индивидуально для каждого языка: * system.yaml: <code>languages.content_fallback</code>: См. <a href=/content/multi-language/#konfiguratsiia-iazykov>Конфигурацию языков</a> * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Языки</strong> &gt; <strong>Content Language Fallback</strong></p> <p>Добавлена новая опция конфигурации для выбора между debugbar и clockwork * system.yaml: <code>debugger.provider</code>: <strong>clockwork</strong>|debugbar * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Отладчик</strong> &gt; <strong>Debugger Provider</strong></p> <p>Добавлена новая опция конфигурации для скрытия потенциально конфиденциальной информации * system.yaml: <code>debugger.censored</code>: <strong>false</strong>|true * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Отладчик</strong> &gt; <strong>Censor Sensitive Data</strong></p> <p>Добавлен новый параметр конфигурации для сохранения старого поведения <code>validation: strict</code> * system.yaml: <code>strict_mode.blueprint_compat</code>: <strong>true</strong>|false * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Дополнительно</strong> &gt; <strong>Blueprint Compatibility</strong></p> <p>Добавлена ​​поддержка конфигурации системы для заголовков HTTP_X_FORWARDED (хост отключен по умолчанию) * system.yaml: <code>http_x_forwarded.protocol</code>: <strong>true</strong>|false * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Дополнительно</strong> &gt; <strong>HTTP_X_FORWARDED_PROTO Enabled</strong> * system.yaml: <code>http_x_forwarded.host</code>: true|<strong>false</strong> * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Дополнительно</strong> &gt; <strong>HTTP_X_FORWARDED_HOST Enabled</strong> * system.yaml: <code>http_x_forwarded.port</code>: <strong>true</strong>|false * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Дополнительно</strong> &gt; <strong>HTTP_X_FORWARDED_PORT Enabled</strong> * system.yaml: <code>http_x_forwarded.ip</code>: true|<strong>false</strong> * Админка: <strong>Настройка</strong> &gt; <strong>Система</strong> &gt; <strong>Дополнительно</strong> &gt; <strong>HTTP_X_FORWARDED IP Enabled</strong></p> <p>Добавлен новый параметр конфигурации security.sanitize_svg для удаления потенциально опасного кода из файлов SVG. * security.yaml: <code>sanitize_svg</code>: <strong>true</strong>|false * Admin: <strong>Configuration</strong> &gt; <strong>Security</strong> &gt; <strong>Sanitize SVG</strong></p> <h2 id=razrabotchikam>РАЗРАБОТЧИКАМ<a class=headerlink href=#razrabotchikam title="Постоянная ссылка">⚓︎</a></h2> <h3 id=otladka>Отладка<a class=headerlink href=#otladka title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлена ​​поддержка для инструментов разработчика <a href=https://underground.works/clockwork>Clockwork</a> (теперь отладчик по умолчанию)</li> <li>Добавлена ​​поддержка для <a href=https://github.com/tideways/php-xhprof-extension>Tideways XHProf</a>, расширения для профилирования PHP</li> <li>Добавлено профилирование Twig для отладчика Clockwork.</li> </ul> <h3 id=ispolzovanie-avtozagruzchika-kompozera>Использование автозагрузчика композера<a class=headerlink href=#ispolzovanie-avtozagruzchika-kompozera title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Обновлен <code>bin/composer.phar</code> до <code>2.0.2</code>, самой новой и быстрой</li> <li> <p>Пожалуйста, добавьте файл <code>composer.json</code> в свой плагин и запустите <code>composer update --no-dev</code> (и не забывайте обновлять его):</p> <div class=highlight><span class=filename>composer.json</span><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"getgrav/grav-plugin-example"</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"grav-plugin"</span><span class=p>,</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Example plugin for Grav CMS"</span><span class=p>,</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=nt>"keywords"</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>"example"</span><span class=p>,</span><span class=w> </span><span class=s2>"plugin"</span><span class=p>],</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=nt>"homepage"</span><span class=p>:</span><span class=w> </span><span class=s2>"https://github.com/getgrav/grav-plugin-example"</span><span class=p>,</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=nt>"license"</span><span class=p>:</span><span class=w> </span><span class=s2>"MIT"</span><span class=p>,</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>    </span><span class=nt>"authors"</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>        </span><span class=p>{</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>            </span><span class=nt>"name"</span><span class=p>:</span><span class=w> </span><span class=s2>"..."</span><span class=p>,</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>            </span><span class=nt>"email"</span><span class=p>:</span><span class=w> </span><span class=s2>"..."</span><span class=p>,</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>            </span><span class=nt>"homepage"</span><span class=p>:</span><span class=w> </span><span class=s2>"..."</span><span class=p>,</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>            </span><span class=nt>"role"</span><span class=p>:</span><span class=w> </span><span class=s2>"Developer"</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>    </span><span class=p>],</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>    </span><span class=nt>"support"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>        </span><span class=nt>"issues"</span><span class=p>:</span><span class=w> </span><span class=s2>"https://github.com/getgrav/grav-plugin-example/issues"</span><span class=p>,</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>        </span><span class=nt>"docs"</span><span class=p>:</span><span class=w> </span><span class=s2>"https://github.com/getgrav/grav-plugin-example/blob/master/README.md"</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>    </span><span class=nt>"require"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>        </span><span class=nt>"php"</span><span class=p>:</span><span class=w> </span><span class=s2>"&gt;=7.1.3"</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>    </span><span class=nt>"autoload"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=w>        </span><span class=nt>"psr-4"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=w>            </span><span class=nt>"Grav\\Plugin\\Example\\"</span><span class=p>:</span><span class=w> </span><span class=s2>"classes/"</span><span class=p>,</span>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=w>            </span><span class=nt>"Grav\\Plugin\\Console\\"</span><span class=p>:</span><span class=w> </span><span class=s2>"cli/"</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=w>        </span><span class=p>},</span>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=w>        </span><span class=nt>"classmap"</span><span class=p>:</span><span class=w>  </span><span class=p>[</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=w>            </span><span class=s2>"example.php"</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=w>        </span><span class=p>]</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=w>    </span><span class=nt>"config"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class=w>        </span><span class=nt>"platform"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a><span class=w>            </span><span class=nt>"php"</span><span class=p>:</span><span class=w> </span><span class=s2>"7.1.3"</span>
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=w>        </span><span class=p>}</span>
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=w>    </span><span class=p>}</span>
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class=p>}</span>
</code></pre></div> <p>См. <a href=https://getcomposer.org/doc/04-schema.md>Composer schema</a></p> </li> <li> <p>Пожалуйста, используйте автозагрузку вместо <code>require</code> в коде:</p> <div class=highlight><span class=filename>example.php</span><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=cp>&lt;?php</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=sd>/**</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=sd> * @return array</span>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=sd> */</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=k>public</span> <span class=k>static</span> <span class=k>function</span> <span class=nf>getSubscribedEvents</span><span class=p>()</span><span class=o>:</span> <span class=k>array</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=p>{</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    <span class=k>return</span> <span class=p>[</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>        <span class=s1>'onPluginsInitialized'</span> <span class=o>=&gt;</span> <span class=p>[</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>            <span class=c1>// This is only required in Grav 1.6. Grav 1.7 automatically calls $plugin-&gt;autolaod() method.</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>            <span class=p>[</span><span class=s1>'autoload'</span><span class=p>,</span> <span class=mi>100000</span><span class=p>],</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>        <span class=p>]</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>    <span class=p>];</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=p>}</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=sd>/**</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=sd> * Composer autoload.</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=sd> *</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=sd> * @return \Composer\Autoload\ClassLoader</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=sd> */</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=k>public</span> <span class=k>function</span> <span class=nf>autoload</span><span class=p>()</span><span class=o>:</span> <span class=nx>\Composer\Autoload\ClassLoader</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=p>{</span>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a>    <span class=k>return</span> <span class=k>require</span> <span class=no>__DIR__</span> <span class=o>.</span> <span class=s1>'/vendor/autoload.php'</span><span class=p>;</span>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=p>}</span>
</code></pre></div> </li> <li> <p>Плагины и темы: <code>$plugin-&gt;autoload()</code> и <code>$theme-&gt;autoload()</code> вызываются автоматически при инициализации объекта</p> </li> <li>Убедитесь, что ваш код не использует <code>require</code> или <code>include</code> для загрузки классов</li> </ul> <h3 id=chertezhi-plaginov-tem-blueprints-yaml>Чертежи плагинов/тем (<code>blueprints.yaml</code>)<a class=headerlink href=#chertezhi-plaginov-tem-blueprints-yaml title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Пожалуйста, добавьте: <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=nt>slug</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">folder-name</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">plugin|theme</span>
</code></pre></div></li> <li> <p>Убедитесь, что вы обновили свои зависимости. Я рекомендую установить Grav либо на 1.6, либо на 1.7 и обновить ваш код/vendor до PHP 7.1 </p><div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=nt>dependencies</span><span class=p>:</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="p p-Indicator">{</span><span class=nt> name</span><span class=p>:</span><span class=w> </span><span class=nv>grav</span><span class="p p-Indicator">,</span><span class=nt> version</span><span class=p>:</span><span class=w> </span><span class=s>'&gt;=1.6.0'</span><span class=w> </span><span class="p p-Indicator">}</span>
</code></pre></div> </li> <li> <p>Добавлены <code>themes</code> для кэшированных чертежей и конфигурации <strong>Grav 1.7.8</strong> добавляет поддержку для определения любого <strong>чертежа</strong> в вашей теме. Переместите все файлы и папки из <code>blueprints/</code> в <code>blueprints/pages/</code>, чтобы сохранить совместимость с вашей темой. Также не забудьте обновить минимальную зависимость Grav на <code>&gt;=1.7.8</code>.</p> </li> </ul> <h3 id=sessii>Сессии<a class=headerlink href=#sessii title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Идентификатор сеанса теперь изменяется при входе в систему, чтобы предотвратить проблемы с фиксацией сеанса</li> <li>Добавлен метод <code>Session::refreshrateId()</code> для правильного предотвращения проблем с фиксацией сеанса</li> </ul> <h3 id=kontrol-dostupa>Контроль доступа<a class=headerlink href=#kontrol-dostupa title="Постоянная ссылка">⚓︎</a></h3> <ul> <li><code>user.authorize()</code> теперь требует, чтобы пользователь был авторизован (прошел проверку 2FA), если правило не содержит <code>login</code> в своем имени.</li> <li> <p>Добавлена ​​поддержка более продвинутого ACL (CRUD)</p> </li> <li> <p><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> у <code>user.authorize()</code> и Flex <code>object.isAuthorized()</code> теперь есть два состояния отказа: <code>false</code> и <code>null</code>.</p> <p>Убедитесь, что у вас нет строгой проверки на ложность: <code>$user-&gt;authorize($action) === false</code> (PHP) или <code>user.authorize(action) is same as(false)</code> (Twig).</p> <p>Для отрицательных проверок вы должны использовать <code>!user-&gt;authorize($action)</code> (PHP) или <code>not user.authorize(action)</code> (Twig).</p> <p>Изменение было сделано, чтобы разрешить строгие правила отказа путем объединения действий, если предыдущие не совпадают: <code>user.authorize(action1) ?? user.authorize(action2) ?? user.authorize(action3)</code>.</p> <p>Обратите внимание, что функция Twig <code>authorize()</code> по-прежнему <strong>сохраняет</strong> прежнее поведение!</p> </li> </ul> <h3 id=stranitsy_1>Страницы<a class=headerlink href=#stranitsy_1 title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлены шаблоны по умолчанию для <code>external.html.twig</code>, <code>default.html.twig</code> и <code>modular.html.twig</code></li> <li>Админка использует <code>Flex-страницы</code> по умолчанию (можно отключить в плагине <code>Flex-Objects</code>)</li> <li>Добавлена ​​поддержка разрешений администратора для конкретных страниц для <code>Flex Pages</code></li> <li>Добавлена ​​поддержка корневой страницы для <code>Flex Pages</code></li> </ul> <p><a class=glightbox href=disable-flex-pages.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img alt="Отключаем страницы Flex" src=disable-flex-pages.png></a></p> <ul> <li>Исправлен неправильный вызов <code>Pages::dispatch()</code> вместо <code>Pages::find()</code></li> <li>Добавлен метод <code>Pages::getCollection()</code></li> <li> <p>Перемещена логика <code>collection()</code> и <code>evaluate()</code> из класса <code>Page</code> в класс <code>Pages</code></p> </li> <li> <p><strong>УСТАРЕЛО</strong> <code>$page-&gt;modular()</code> в пользу <code>$page-&gt;isModule()</code></p> </li> <li><strong>УСТАРЕЛО</strong> <code>PageCollectionInterface::nonModular()</code> в пользу <code>PageCollectionInterface::pages()</code></li> <li> <p><strong>УСТАРЕЛО</strong> <code>PageCollectionInterface::modular()</code> в пользу <code>PageCollectionInterface::modules()</code></p> </li> <li> <p><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Исправлено возвращение <code>null</code> методами <code>Page::modular()</code> и <code>Page::modularTwig()</code> для папок и других неинициализированных страниц. Не должно влиять на ваш код, если вы не проверяли его на <code>false</code> или <code>null</code>.</p> </li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Всегда используйте <code>\Grav\Common\Page\Interfaces\PageInterface</code> вместо <code>\Grav\Common\Page\Page</code> в сигнатурах методов</li> <li>Админка теперь использует <code>Flex-страницы</code> по умолчанию, коллекция будет вести себя немного по-другому</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> <code>$page-&gt;topParent()</code> может возвращать саму страницу вместо null</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> <code>$page-&gt;header()</code> может возвращать объект <code>\Grav\Common\Page\Header</code> вместо <code>stdClass</code>, вам нужно обрабатывать оба (Flex против обычного)</li> </ul> <h3 id=media_1>Медиа<a class=headerlink href=#media_1 title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлен метод <code>MediaTrait:: freeMedia()</code> для свободных носителей (и памяти)</li> <li>Добавлена поддержка загрузки и удаления изображений непосредственно в <code>Media</code> с помощью PSR-7</li> <li>Скорректированные типы активов для расширения активов в классе</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Медиа больше не расширяются <code>Getters</code>, доступ через <code>$media-&gt;$filename</code> больше не работает, используйте <code>$media[$filename]</code>!</li> </ul> <h3 id=markdown>Markdown<a class=headerlink href=#markdown title="Постоянная ссылка">⚓︎</a></h3> <ul> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Обновлен Parsedown до 1.7 для Parsedown-Extra 0.8. Плагины, расширяющие Parsedown, могут нуждаться в исправлении для рендеринга в виде HTML</li> <li>Добавлен новый метод <code>Excerpts::processLinkHtml()</code></li> </ul> <h3 id=polzovateli>Пользователи<a class=headerlink href=#polzovateli title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлена экспериментальная поддержка <code>Flex-пользователей</code> в интерфейсе (пока не рекомендуется использовать)</li> <li>Админка использует <code>Flex-пользователей</code> по умолчанию (можно отключить в плагине <code>Flex-Objects</code>)</li> <li>Улучшены <code>Flex-пользователи</code>: подчинение чертежам и разрешение использовать Flex только в админке</li> <li>Улучшены <code>Flex-пользователи</code>: ACL пользователя и группы теперь поддерживает запрет разрешений</li> <li>Метод <code>UserInterface::authorize()</code> при возврате <code>null</code> имеет то же значение, что и <code>false</code>, если доступ запрещен из-за отсутствия правила соответствия</li> <li><strong>УСТАРЕЛО</strong> <code>\Grav\Common\User\Group</code> в пользу <code>$grav['user_groups']</code>, который содержит коллекцию Flex UserGroup</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Всегда используйте <code>\Grav\Common\User\Interfaces\UserInterface</code> вместо <code>\Grav\Common\User\User</code> в сигнатурах методов</li> </ul> <h3 id=flex>Flex<a class=headerlink href=#flex title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Не используйте классы Flex <code>Framework</code> напрямую, лучше использовать или расширять классы под пространством имен <code>Grav\Common\Flex\Types\Generic</code></li> <li>Добавлен <code>$grav['flex']</code> для доступа ко всем зарегистрированным каталогам Flex</li> <li>Добавлено событие <code>FlexRegisterEvent</code>, который срабатывает при первом обращении к <code>$grav['flex']</code></li> <li>Добавлен метод <code>hasFlexFeature()</code> для проверки, реализует ли <code>FlexObject</code> или <code>FlexCollection</code> заданную функцию</li> <li>Добавлен метод <code>getFlexFeatures()</code> для возврата всех функций, которые реализует <code>FlexObject</code> или <code>FlexCollection</code></li> <li>Добавлен метод <code>FlexObject::refresh()</code> для проверки, что объект обновлен</li> <li>Добавлен метод <code>FlexStorage::getMetaData()</code> для получения обновленной метаинформации объекта для перечисленных ключей</li> <li>Добавлен интерфейс <code>FlexDirectoryInterface</code></li> <li>Добавлен параметр поиска <code>same_as</code> для объектов Flex</li> <li>Метод <code>$page-&gt;header()</code> объекта <code>Flex Pages</code> возвращает объект <code>\Grav\Common\Page\Header</code>, прежний класс <code>Page</code> по-прежнему возвращает <code>stdClass</code></li> <li>Переименован метод <code>PageCollectionInterface::nonModular()</code> в <code>PageCollectionInterface::pages()</code>, прежний метод объявлен устаревшим</li> <li>Переименован метод <code>PageCollectionInterface::modular()</code> в <code>PageCollectionInterface::modules()</code>, прежний метод объявлен устаревшим</li> <li><code>FlexDirectory::getObject()</code> теперь можно вызывать без каких-либо параметров для создания нового объекта</li> <li>Реализована настраиваемая конфигурация для каждого типа гибкого каталога</li> <li><strong>УСТАРЕЛИ</strong> <code>FlexDirectory::update()</code> и <code>FlexDirectory::remove()</code></li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Все классы типов Flex перемещены в пространство <code>Grav\Common\Flex</code></li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> <code>FlexStorageInterface::getStoragePath()</code> и <code>getMediaPath()</code> теперь могут возвращать <code>null</code></li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Объекты Flex больше не возвращают временный ключ, если у них его нет; вместо этого возвращается пустой ключ</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Добавлен аргумент перезагрузки в <code>FlexStorageInterface::getMetaData()</code></li> <li>Вы можете добавить файл <code>edit_list.html.twig</code> в поле формы, чтобы настроить внешний вид в представлении списка</li> </ul> <h3 id=multiiazychnost_1>Мультиязычность<a class=headerlink href=#multiiazychnost_1 title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Улучшенная языковая поддержка для класса <code>Route</code></li> <li>Переводы: переименуйте MODULAR в MODULE везде</li> <li>Добавлен метод <code>Language::getPageExtensions()</code>, чтобы получить полный список поддерживаемых расширений языка страниц</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Исправлен метод <code>Language::getFallbackPageExtensions()</code> для возврата к языку по умолчанию, вместо переключения на все языки</li> </ul> <h3 id=multisait>Мультисайт<a class=headerlink href=#multisait title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлена ​​поддержка размещения всех сайтов/сред в папке <code>user/env</code></li> </ul> <h3 id=serializatsiia>Сериализация<a class=headerlink href=#serializatsiia title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Все классы теперь используют сериализацию PHP 7.4. Старые методы <code>Serializable</code> теперь являются завершёнными (<code>final</code>) и не могут быть отменены.</li> </ul> <h3 id=chertezhi>Чертежи<a class=headerlink href=#chertezhi title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлен фильтр <code>flatten_array</code>, чтобы формировать проверку поля</li> <li>Добавлена поддержка <code>security@: or: [admin.super, admin.pages]</code> в чертежах (поддержка вложенного режима И/ИЛИ)</li> <li>Проверка чертежей: добавлена <code>validate: value_type: bool|int|float|string|trim</code> в <code>array</code> для фильтрации всех значений внутри массива</li> <li> <p>Если в ваших плагинах есть папка с чертежами, инициализировать её в этом случае будет слишком поздно. Вместо этого сделайте это:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=cp>&lt;?php</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=k>class</span> <span class=nc>MyPlugin</span> <span class=k>extends</span> <span class=nx>Plugin</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=p>{</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>    <span class=sd>/** @var array */</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>    <span class=k>public</span> <span class=nv>$features</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>        <span class=s1>'blueprints'</span> <span class=o>=&gt;</span> <span class=mi>0</span><span class=p>,</span> <span class=c1>// Use priority 0</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a>    <span class=p>];</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=p>}</span>
</code></pre></div> </li> </ul> <h3 id=sobytiia>События<a class=headerlink href=#sobytiia title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Используйте <code>Symfony EventDispatcher</code> напрямую вместо обертки <code>rockettheme/toolbox</code>.</li> <li>Добавлен метод <code>$grav-&gt;dispatchEvent()</code> для событий PSR-14</li> <li>Добавлено событие <code>PluginsLoadedEvent</code>, которое срабатывает после того, как плагины были загружены, но ещё не инициализированы</li> <li>Добавлено событие <code>SessionStartEvent</code>, которое срабатывает при запуске сеанса</li> <li>Добавлено событие <code>FlexRegisterEvent</code>, которое срабатывает при первом доступе к <code>$grav['flex']</code></li> <li>Добавлено событие <code>PermissionsRegisterEvent</code>, которое срабатывает при первом доступе к <code>$grav['permissions']</code></li> <li>Добавлено событие <code>onAfterCacheClear</code></li> <li> <p>Проверьте событие <code>onAdminTwigTemplatePaths</code>, так не должно быть:</p> <p></p><div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=cp>&lt;?php</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=k>public</span> <span class=k>function</span> <span class=nf>onAdminTwigTemplatePaths</span><span class=p>(</span><span class=nv>$event</span><span class=p>)</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=p>{</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>    <span class=c1>// This code breaks all the other plugins in admin, including Flex Objects</span>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>    <span class=nv>$event</span><span class=p>[</span><span class=s1>'paths'</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=no>__DIR__</span> <span class=o>.</span> <span class=s1>'/admin/themes/grav/templates'</span><span class=p>];</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>}</span>
</code></pre></div> но: <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=cp>&lt;?php</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>public</span> <span class=k>function</span> <span class=nf>onAdminTwigTemplatePaths</span><span class=p>(</span><span class=nv>$event</span><span class=p>)</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=p>{</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>    <span class=c1>// Add plugin template path for admin.</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>    <span class=nv>$paths</span> <span class=o>=</span> <span class=nv>$event</span><span class=p>[</span><span class=s1>'paths'</span><span class=p>];</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>    <span class=nv>$paths</span><span class=p>[]</span> <span class=o>=</span> <span class=no>__DIR__</span> <span class=o>.</span> <span class=s1>'/admin/themes/grav/templates'</span><span class=p>;</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a>    <span class=nv>$event</span><span class=p>[</span><span class=s1>'paths'</span><span class=p>]</span> <span class=o>=</span> <span class=nv>$paths</span><span class=p>;</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=p>}</span>
</code></pre></div> </li> </ul> <h3 id=javascript>JavaScript<a class=headerlink href=#javascript title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Обновлен пакет JQuery до последней версии <code>3.5.1</code></li> </ul> <h3 id=raznoe>Разное<a class=headerlink href=#raznoe title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Добавлен <code>Utils::functionExists()</code>: Совместимость с PHP 8 <code>function_exists()</code></li> <li>Добавлены хелперы <code>Utils::isAssoc()</code> и <code>Utils::isNegative()</code></li> <li>Добавлен метод <code>Utils::simpleTemplate()</code> для очень простого создания шаблонов переменных</li> <li>Добавлен метод <code>Utils::fullPath()</code> для получения полного пути к файлу, потоку и т. д.</li> <li>Поддержка настраиваемой замены нулевого символа в <code>CSVFormatter::decode()</code></li> <li>Добавлена функция <code>Security::sanitizeSVG()</code></li> <li>Добавлен метод <code>$grav-&gt;close()</code>, чтобы правильно завершать запрос ответом</li> <li>Добавлен метод <code>Folder::countChildren()</code>, чтобы определить, есть ли в папке дочерние папки</li> <li>Поддержка символических ссылок при сохранении <code>File</code></li> <li>Добавлен метод <code>Route::getBase()</code></li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Делаем объекты <code>Route</code> неизменными. Это означает, что вам нужно сделать: <code>{% set route = route.withExtension('.html') %}</code> (для всех методов <code>withX</code>) для хранения обновленных версий.</li> <li>Лучшая обработка <code>Content-Encoding</code> в Apache, когда сжатие контента отключено</li> <li>Добавлена функция <code>Uri::getAllHeaders()</code></li> <li>Разрешить передачу параметров <code>JsonFormatter</code> в виде строки</li> </ul> <h3 id=cli_1>CLI<a class=headerlink href=#cli_1 title="Постоянная ссылка">⚓︎</a></h3> <ul> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Многие плагины инициализируют Grav неправильно, поэтому небезопасно инициализировать плагины и тему самостоятельно<ul> <li>Следующие вызовы требуют Grav 1.6.21 или более поздней версии, поэтому рекомендуется установить зависимость Grav для этой версии</li> <li>Внутри метода `serve():</li> <li>Вызывайте <code>$this-&gt;setLanguage($langCode);</code> прежде чем делать что-либо ещё, если вы хотите установить язык (или использовать по умолчанию)</li> <li>Вызывайте один из следующих методов:<ul> <li><code>$this-&gt;initializeGrav();</code> Уже вызван, если до этого была введена команда <code>bin/plugin</code></li> <li><code>$this-&gt;initializePlugins();</code> Это инициализирует grav, плагины (до <code>onPluginsInitialized</code>)</li> <li><code>$this-&gt;initializeThemes();</code> Это инициализирует grav, плагины и тему</li> <li><code>$this-&gt;initializePages();</code> Это инициализирует grav, плагины, тему и все необходимое для страниц.</li> </ul> </li> </ul> </li> <li>Рекомендуется добавлять к классам команд CLI префикс вашего плагина, иначе могут возникнуть конфликты имен (у нас уже есть!)</li> </ul> <h3 id=ispolzuemye-biblioteki>Используемые библиотеки<a class=headerlink href=#ispolzuemye-biblioteki title="Постоянная ссылка">⚓︎</a></h3> <ul> <li>Компоненты Symfony обновлены до версии 4.4, пожалуйста, обновите все устаревшие функции в своем коде.</li> <li><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> Пожалуйста, запустите <code>bin/grav yamllinter</code>, чтобы найти любые ошибки синтаксического анализа YAML на вашем сайте (включая ваши плагины и темы).</li> </ul> <h2 id=plaginy>ПЛАГИНЫ<a class=headerlink href=#plaginy title="Постоянная ссылка">⚓︎</a></h2> <h3 id=adminka>Админка<a class=headerlink href=#adminka title="Постоянная ссылка">⚓︎</a></h3> <ul> <li> <p>Добавлена опция <code>редактор контента</code> в проект учётной записи пользователя</p> </li> <li> <p><strong>НАРУШЕНИЕ ОБРАТНОЙ СОВМЕСТИМОСТИ</strong> админка больше не будет инициализировать frontend-страницы, это было сделано для того, чтобы значительно ускорить работу плагина админки.</p> <p>Пожалуйста, вызывайте <code>$grav['admin']-&gt;enablePages()</code> или <code>{% do admin.enablePages() %}</code> если вам нужно получить доступ к интерфейсным страницам. Этот вызов можно безопасно делать несколько раз.</p> <p>Если вы используете <code>Flex-страницы</code>, используйте каталог Flex вместо них, это сделает ваш код намного быстрее.</p> </li> <li> <p>Админка теперь использует Flex для редактирования <code>учетных записей</code> и <code>страниц</code>. Если ваш плагин подключается к любому из них, пожалуйста, убедитесь, что они все ещё работают.</p> </li> <li> <p>Кэширование админки включено по умолчанию, убедитесь, что ваш плагин очищает кэш при необходимости. Пожалуйста, избегайте очистки всего кэша!</p> </li> </ul> <h3 id=iadro-shortkoda>Ядро шорткода<a class=headerlink href=#iadro-shortkoda title="Постоянная ссылка">⚓︎</a></h3> <ul> <li><strong>УСТАРЕЛО</strong> Каждый шорткод должен иметь метод <code>init()</code>, классы без него в будущем перестанут работать.</li> </ul> <h2 id=ustranenie-voznikshikh-problem>Устранение возникших проблем<a class=headerlink href=#ustranenie-voznikshikh-problem title="Постоянная ссылка">⚓︎</a></h2> <h3 id=oshibka-shablon-flex-objects-html-twig-dlia-stranitsy-ne-naiden><code>ОШИБКА: Шаблон flex-objects.html.twig для страницы не найден</code><a class=headerlink href=#oshibka-shablon-flex-objects-html-twig-dlia-stranitsy-ne-naiden title="Постоянная ссылка">⚓︎</a></h3> <p>Если вы получаете эту ошибку после обновления до Grav 1.7, это может быть связано с плагином <code>content-edit</code>. Если отключить этот плагин, ошибка должна исчезнуть сама собой. См. <a href=https://github.com/getgrav/grav/issues/3169>описание проблемы #3169</a></p> <h3 id=neperevedennaia-adminka>Непереведённая админка<a class=headerlink href=#neperevedennaia-adminka title="Постоянная ссылка">⚓︎</a></h3> <p>Если ваша админка выглядит так:</p> <p><a class=glightbox href=untranslated.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img alt="Непереведённая админка" src=untranslated.png></a></p> <p>Исправление очень простое и может быть сделано даже при неполном переводе. Просто перейдите к <code>PLUGIN_ADMIN.CONFIGURATION</code>, а потом в <code>PLUGIN_ADMIN.LANGUAGES</code>, измените параметр <code>PLUGIN_ADMIN.LANGUAGE_TRANLATIONS</code> на <code>PLUGIN_ADMIN.YES</code>:</p> <p><a class=glightbox href=fix-translations.png data-type=image data-width=auto data-height=auto data-desc-position=bottom><img alt="Исправление переводов" src=fix-translations.png></a></p> <h3 id=chertezhi-stranits-perestaiut-rabotat-v-adminke>Чертежи страниц перестают работать в админке<a class=headerlink href=#chertezhi-stranits-perestaiut-rabotat-v-adminke title="Постоянная ссылка">⚓︎</a></h3> <p>Если вы не видите свои пользовательские поля при редактировании страницы, ваша тема использует два противоречивых места для чертежей страниц.</p> <p>Если тема была создана не вами, пожалуйста, сообщите об ошибке автору темы.</p> <p>Чтобы исправить ошибку, вам необходимо переместить все файлы и папки вашей темы из <code>blueprints/</code> в <code>blueprints/pages/</code> (требуется <strong>Grav 1.7.8+</strong>). В противном случае, если тема должна поддерживать более старые версии Grav, сделайте наоборот.</p> <h3 id=oshibka-loop-detected-while-extending-blueprint-file>Ошибка: Loop detected while extending blueprint file<a class=headerlink href=#oshibka-loop-detected-while-extending-blueprint-file title="Постоянная ссылка">⚓︎</a></h3> <p>Самым простым исправлением ошибки цикла является перемещение файлов в нужное место, см. вышеуказанный вопрос.</p> <p>В качестве альтернативы вы можете исправить проблему, изменив чертеж неработающей страницы с этого блока:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=nt>extends@</span><span class=p>:</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>NAME</span><span class="p p-Indicator">]</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=nt>context</span><span class=p>:</span><span class=w> </span><span class=s>'blueprints://pages'</span>
</code></pre></div> <p>где <code>[NAME]</code> — имя файла (без расширения) самого чертежа, на этот блок</p> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=nt>extends@</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">self@</span>
</code></pre></div> <h3 id=otsutstvuiut-stili-css-v-adminke>Отсутствуют стили CSS в админке<a class=headerlink href=#otsutstvuiut-stili-css-v-adminke title="Постоянная ссылка">⚓︎</a></h3> <p>Сообщалось, что после обновления до последней версии Grav 1.7 и Admin 1.10 некоторые страницы администратора выглядят сломанными и не полностью стилизованными. Это может быть связано с плагином <code>imagecreate</code>. Недостаточно отключить этот плагин, вы должны <strong>полностью удалить</strong> его, после чего ошибка должна исчезнуть сама собой. См. <a href=https://github.com/getgrav/grav-plugin-admin/issues/2035>описание проблемы #2035</a></p> <h2 id=vozvrat-k-poslednei-versii-grav-1-6>Возврат к последней версии Grav 1.6<a class=headerlink href=#vozvrat-k-poslednei-versii-grav-1-6 title="Постоянная ссылка">⚓︎</a></h2> <p>Хотя мы рекомендуем решить любые проблемы, которые могут возникнуть у вас, чтобы гарантировать, что Grav 1.7 и будущие обновления будут лёгким обновлением, будут сценарии, в которых у вас есть настраиваемые функции плагина или нет ресурсов разработчика под рукой, и вам просто нужно вернуться к Grav 1.6 быстро.</p> <p>Если у вас есть доступ к сайту через интерфейс командной строки, это можно сделать, выполнив следующие команды из <strong>корня вашего сайта Grav 1.7</strong>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>wget<span class=w> </span>-q<span class=w> </span>https://getgrav.org/download/core/grav-update/1.6.31<span class=w> </span>-O<span class=w> </span>tmp/grav-update-v1.6.31.zip
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>wget<span class=w> </span>-q<span class=w> </span>https://getgrav.org/download/plugins/admin/1.9.19<span class=w> </span>-O<span class=w> </span>tmp/grav-plugin-admin-v1.9.19.zip
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>unzip<span class=w> </span>tmp/grav-update-v1.6.31.zip<span class=w> </span>-d<span class=w> </span>tmp
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>unzip<span class=w> </span>tmp/grav-plugin-admin-v1.9.19.zip<span class=w> </span>-d<span class=w> </span>tmp
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>cp<span class=w> </span>-rf<span class=w> </span>tmp/getgrav-grav-plugin-admin-5d86394/*<span class=w> </span>user/plugins/admin/
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>cp<span class=w> </span>-rf<span class=w> </span>tmp/grav-update/*<span class=w> </span>./
</code></pre></div> <p>По сути, здесь выполняется <strong>прямая установка</strong> последней версии Grav 1.6 и Admin 1.9 поверх вашей текущей установки. Папку <code>user/</code> это не затрагивает, поэтому ваш контент и плагины не пострадают.</p> <p>Для тех, у кого нет доступа к CLI, скачайте файлы <a href=https://github.com/getgrav/grav/releases/download/1.6.31/grav-update-v1.6.31.zip>grav-update-v1.6.31.zip</a> и <a href=https://github.com/getgrav/grav-plugin-admin/archive/1.9.19.zip>grav-plugin-admin-1.9.19.zip</a>. Разархивируйте файлы в свою файловую систему. Затем используйте свой любимый FTP/SFTP-клиент, чтобы скопировать все файлы Grav в ваш <code>WEBROOT</code> и файлы админки в <code>WEBROOT/user/plugins/admin</code>.</p></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> К началу </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул"> <a href=../grav-16-upgrade-guide/ class="md-footer__link md-footer__link--prev" aria-label="Назад: Руководство по обновлению до Grav 1.6"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Назад </span> <div class=md-ellipsis> Руководство по обновлению до Grav 1.6 </div> </div> </a> <a href=../../yaml/ class="md-footer__link md-footer__link--next" aria-label="Вперед: Синтаксис YAML"> <div class=md-footer__title> <span class=md-footer__direction> Вперед </span> <div class=md-ellipsis> Синтаксис YAML </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.top", "navigation.tracking", "navigation.footer", "search.highlight", "search.share", "search.suggest", "toc.follow", "content.tabs.link", "content.code.copy", "content.code.select"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../../../extra.js></script> <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>