---
title: Шаблонизатор Twig
taxonomy:
    category: docs
---

Twig - быстрый оптимизированный шаблонный движок для PHP. Он разработан с нуля, чтобы облегчить создание шаблонов как разработчику, так и дизайнеру.

Легкий синтаксис и простые процессы делают его естественным для всех, кто знаком с Smarty, Django, Jinja, Liquid или Stencil.

Мы используем его для наших Грав-шаблонов отчасти из-за его гибкости и присущей безопасности. Тот факт, что это один из самых быстрых шаблонных движков для PHP, заставил выбрать его для использования в Grav без мозгов.

Twig компилирует шаблоны вплоть до обычного PHP. Это сокращает количество накладных расходов на PHP до минимума, что приводит к более быстрому и удобному обслуживанию пользователей.

Он также является очень гибким двигателем благодаря своему *гибкому* и *парсельному*. Это позволяет разработчику создавать собственные пользовательские теги и фильтры. Он также позволяет ему создать свой собственный [специфический для домена язык](http://en.wikipedia.org/wiki/Domain-specific_language) (DSL).

Когда дело доходит до охраны, Твиг не срезает углы. Это дает разработчику режим песочницы, который позволяет исследовать любой недоверенный код. Это дает вам возможность использовать Twig в качестве языка шаблонов для приложений, в то же время давая пользователям возможность изменять дизайн шаблонов.

По сути, это мощный двигатель, который дает вам контроль над пользовательским интерфейсом. В сочетании с YAML для конфигурирования, это делает мощную и простую систему для работы с любым разработчиком или менеджером сайтов.

## Как работает Twig?

Twig работает, убирая все фокус-покус из дизайна шаблона. Шаблоны - это, в основном, просто текстовые файлы, содержащие *переменные* или *выражения*, которые при оценке шаблона заменяются значениями.

*Теги* также являются важной частью файла шаблона, так как они контролируют логику самого шаблона.

Twig имеет два основных языковых ограничения:

* `{{ }}` выводит результат вычисления выражения;
* `{% %}` выполняет инструкции.

Вот базовый шаблон, созданный с помощью Twig:

[prism classes="language-html line-numbers"]
<!DOCTYPE html>
<html>
    <head>
        <title>All About Cookies</title>
    </head>
    <body>
        My name is {{ name }} and I love cookies.
        My favorite flavors of cookies are:
        <ul>
        {% for cookie in cookies %}
            <li>{{ cookie.flavor }}</li>
		{% endfor %}
        </ul>
        <h1>Cookies are the best!</h1>
    </body>
</html>
[/prism]

В этом примере мы устанавливаем заголовок сайта так же, как и для любой стандартной веб-страницы. Разница в том, что мы смогли использовать простой синтаксис Twig для представления имени автора и создания динамического списка типов элементов.

Шаблон сначала загружается, а затем передается через **lexer**, где его исходный код маркируется и разбивается на мелкие кусочки. В этот момент **синтаксический анализатор** принимает токены и превращает их в абстрактное синтаксическое дерево.

Как только это делается, компилятор превращает это в PHP-код, который затем может быть оценен и отображен пользователю.

Twig также может быть расширен для добавления дополнительных тегов, фильтров, тестов, операторов, глобальных переменных и функций. Более подробную информацию о расширении Twig можно найти в его [официальной документации](https://twig.symfony.com/doc/3.x/advanced.html).

## Синтаксис Twig

Шаблон Twig имеет несколько ключевых компонентов, которые помогают ему понять, что именно вы хотели бы сделать. К ним относятся теги, фильтры, функции и переменные.

Давайте более подробно рассмотрим эти важные инструменты и то, как они могут вам помочь.
создайте невероятный шаблон.

### Теги

Теги говорят Твигу, что ему нужно делать. Он позволяет вам установить, какой код Twig должен обрабатывать, а какой код он должен игнорировать во время оценки.

Существует несколько различных типов тегов, и каждый из них имеет свой собственный специфический синтаксис, который отличает их друг от друга.

#### Комментарии

Теги комментариев (`{#Insert Comment Here#}') используются для установки комментариев, которые существуют в файле шаблона Twig, но фактически не видны конечному пользователю. Они удаляются во время парсинга, не анализируются и не выводятся.

Хорошо использовать эти теги для объяснения того, что делает конкретная строка кода или команда, чтобы другой разработчик или дизайнер в вашей команде мог быстро прочитать и понять.

Вот пример тега комментария, который вы найдете в файле шаблона Twig:

[prism classes="language-twig"]
{# Chocolate Chip Cookies are great! Don't tell anyone! #}
[/prism]

#### Выходные теги

Выходные теги ('{{ Insert Output Here }}`) будут оценены и добавлены к сгенерированному выходу. Это место, где вы можете поместить все, что хотите, чтобы появиться на переднем конце, или в каком-то другом сгенерированном контенте.

Вот пример выходных тегов, используемых в шаблоне Twig:

[prism classes="language-twig"]
My name is {{ name }} and I love cookies.
[/prism]

Переменная `name` была вставлена в эту строку и будет показана конечному пользователю как `My name is Jake and I love cookies.`, так как `Jake` было значение переменной имени.

#### Теги действий

Экшн-теги - это путеводители в мир веток. Эти теги на самом деле что-то делают, в отличие от других, которые либо передают что-то, либо сидят сложа руки в исходном коде, ожидая, пока дизайнер прочитает его.

Теги действий задают переменные, цикл через массивы и условия тестирования. Ваши `for` и `if` заявления сделаны с использованием этих меток.

Вот как может выглядеть тег действия в шаблоне Twig:

[prism classes="language-twig line-numbers"]
{% set hour = now | date("G") %}
{% if hour >= 9 and hour < 17 %}
    <p>Time for cookies!</p>
{% else %}
    <p>Time to bake more cookies!</p>
{% endif %}
[/prism]

Первоначальный тег действия устанавливает час как текущий час в 24-часовом формате. Это значение затем используется для определения, находится ли оно между 9 утра и 5 вечера. Если это так, то отображается `Время для печенюшек!`. Если это не так, то вместо этого отображается `Пришло время испечь еще печенья!`.

Очень важно, чтобы метки не перекрывали друг друга. Вы не можете поместить выходной тег внутри тега действия или наоборот.

### Фильтры

Фильтры полезны, особенно когда вы используете выходные теги для отображения данных, которые могут быть отформатированы не так, как вы хотите.

Допустим, значение переменной `name` может включать нежелательные SGML/XML тэги. Вы можете отфильтровать их, используя код, приведенный ниже:

[prism classes="language-twig"]
{{ name|striptags }}
[/prism]

### Функции

Функции могут генерировать контент. За ними, как правило, следуют аргументы, которые появляются в скобках, помещаемых непосредственно после вызова функции. Даже если аргумент отсутствует, функция все равно будет иметь скобки `()`, расположенные непосредственно после нее.

[prism classes="language-twig line-numbers"]
{% if date(cookie.created_at) < date('-2days') %}
    {# Eat it! #}
{% endif %}
[/prism]

## Ресурсы

* [Официальная документация Twig](http://twig.sensiolabs.org/documentation)
* [Twig для дизайнеров шаблонов](http://twig.sensiolabs.org/doc/templates.html)
* [Twig для разработчиков](http://twig.sensiolabs.org/doc/api.html)
* [6-минутное введение в Twig](http://www.dev-metal.com/6min-video-introduction-twig-php-templating-engine/)
* [Введение в Twig](http://www.slideshare.net/markstory/introduction-to-twig)
* [Twig: Основы (бесплатное вступление к платному курсу)](https://knpuniversity.com/screencast/twig/basics)
