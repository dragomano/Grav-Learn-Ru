<!DOCTYPE html><html lang="ru" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Список проблем и решений, связанных с плагинами Grav CMS."><meta name="author" content="Bugo"><link href="https://grav-docs.ru/cookbook/plugin-recipes/" rel="canonical"><link href="../twig-recipes/" rel="prev"><link href="../admin-recipes/" rel="next"><link rel="icon" href="../../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2"><link rel="apple-touch-icon" sizes="180x180" href="../../assets/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../../assets/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../../assets/images/favicon-16x16.png"><link rel="manifest" href="../../assets/images/site.webmanifest"><link rel="mask-icon" href="../../assets/images/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="../../assets/images/favicon.ico"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="../../assets/images/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>Рецепты плагинов - Документация Grav CMS на русском</title><link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css"><link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&amp;display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style><link rel="stylesheet" href="../../extra.css"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="orange"> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a href="#retsepty-plaginov" class="md-skip"> Перейти к содержанию </a> </div> <div data-md-component="announce"> </div> <header class="md-header md-header--shadow" data-md-component="header"> <nav class="md-header__inner md-grid" aria-label="Верхний колонтитул"> <a href="../.." title="Документация Grav CMS на русском" class="md-header__button md-logo" aria-label="Документация Grav CMS на русском" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M302.6 210.6c4.5 4.5 4.5 12.3 0 16.8l-10 10c-4.5 4.9-12.3 4.9-17.1 0l-10.8-10.8c-4.5-4.9-4.5-12.3 0-17.1l10-10c4.5-4.5 12.3-4.5 17.1 0zm-31.2-20.3a7.7 7.7 0 1 0-10.6-11 7.7 7.7 0 1 0 10.6 11m-26.8 5.5a7.5 7.5 0 1 0 10.7 10.5 7.5 7.5 0 1 0-10.7-10.5m74.8-13.8c-20.5-14.9-34.9-44.6-12.3-70.3 22.3-25.7 42-17.8 61.7.8 12.3 11.7 30.2 25.7 17.8 49.8-12.9 24.3-46.6 34.3-67.2 19.7m49.2-45.9c-9.2-10.3-24.1 7.1-16 16.6 7.6 9.3 33.1 2.5 16-16.6M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m443.7 44c2.6-16.6-20.9-17.1-26-26.5-14-24.9-28.6-38-56.3-31.4 12-8.3 24.3-6.3 24.3-6.3.3-6.6 0-13.4-9.7-25.7 4-12.9.3-23.1.3-23.1 16-8.9 27.7-25.2 30-44.6 3.7-32-19.4-61.1-51.4-64.8-22.8-2.6-45.1 7.9-56.1 26.5-23.9 41.4 1.4 73.2 23.1 84-14.9-1.4-35.4-12.3-41.4-35.4-6.8-26.5 2.9-51.4 9.2-63.4 0 0-4.5-6-8.3-9.2 0 0-14.2 0-25.4 5.5 12.3-15.7 26-14.9 26-14.9 0-6.6-.6-15.4-3.7-22.3-5.6-11.4-24.6-13.3-32.7 2.9.1-.2.3-.4.4-.5-5.2 12.3-1.1 57.7 17.4 90-2.6 1.4-9.4 6.3-13.4 10.3-22.3 10-58 62.2-58 62.2-29.1 11.1-79.7 52.5-72.9 82.3.3 3.1 1.4 5.7 3.1 7.7-2.9 2.3-5.7 5.2-8.6 8.6-12.3 14.2-5.5 36.3 18.3 25.2 16.3-7.4 30.6-20.9 37.5-31.4 0 0-5.7-5.2-16.8-4.5 28.6-6.8 35.4-9.7 47.7-9.4 8.3 4 8.3-35.4 8.3-35.4 0-15.2-2.3-32-11.5-42.8 12.9 12.6 30 33.8 28.9 62.6-.8 18.9-15.7 23.7-15.7 23.7-9.4 17.1-44.6 68-31.4 109.4 0 0-10-15.4-10.5-22.8-18 20-48 54-25.4 66.6 27.5 15.2 112.3-91.5 130.3-146.9 35.7-21.5 57.2-48.8 66-67.1C362 284 437.7 336.6 443.7 300"></path></svg> </a> <label class="md-header__button md-icon" for="__drawer"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> Документация Grav CMS на русском </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Рецепты плагинов </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="orange" aria-label="Тёмный режим" type="radio" name="__palette" id="__palette_0"> <label class="md-header__button md-icon" title="Тёмный режим" for="__palette_1" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="green" data-md-color-accent="orange" aria-label="Светлый режим" type="radio" name="__palette" id="__palette_1"> <label class="md-header__button md-icon" title="Светлый режим" for="__palette_0" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input type="text" class="md-search__input" name="query" aria-label="Поиск" placeholder="Поиск" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required> <label class="md-search__icon md-icon" for="__search"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class="md-search__options" aria-label="Поиск"> <a href="javascript:void(0)" class="md-search__icon md-icon" title="Поделиться" aria-label="Поделиться" data-clipboard data-clipboard-text data-md-component="search-share" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg> </a> <button type="reset" class="md-search__icon md-icon" title="Очистить" aria-label="Очистить" tabindex="-1"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class="md-search__suggest" data-md-component="search-suggest"></div> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Инициализация поиска </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a href="https://github.com/dragomano/Grav-Learn-Ru" title="Перейти к репозиторию" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--primary" aria-label="Навигация" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a href="../.." title="Документация Grav CMS на русском" class="md-nav__button md-logo" aria-label="Документация Grav CMS на русском" data-md-component="logo"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M302.6 210.6c4.5 4.5 4.5 12.3 0 16.8l-10 10c-4.5 4.9-12.3 4.9-17.1 0l-10.8-10.8c-4.5-4.9-4.5-12.3 0-17.1l10-10c4.5-4.5 12.3-4.5 17.1 0zm-31.2-20.3a7.7 7.7 0 1 0-10.6-11 7.7 7.7 0 1 0 10.6 11m-26.8 5.5a7.5 7.5 0 1 0 10.7 10.5 7.5 7.5 0 1 0-10.7-10.5m74.8-13.8c-20.5-14.9-34.9-44.6-12.3-70.3 22.3-25.7 42-17.8 61.7.8 12.3 11.7 30.2 25.7 17.8 49.8-12.9 24.3-46.6 34.3-67.2 19.7m49.2-45.9c-9.2-10.3-24.1 7.1-16 16.6 7.6 9.3 33.1 2.5 16-16.6M0 256a256 256 0 1 1 512 0 256 256 0 1 1-512 0m443.7 44c2.6-16.6-20.9-17.1-26-26.5-14-24.9-28.6-38-56.3-31.4 12-8.3 24.3-6.3 24.3-6.3.3-6.6 0-13.4-9.7-25.7 4-12.9.3-23.1.3-23.1 16-8.9 27.7-25.2 30-44.6 3.7-32-19.4-61.1-51.4-64.8-22.8-2.6-45.1 7.9-56.1 26.5-23.9 41.4 1.4 73.2 23.1 84-14.9-1.4-35.4-12.3-41.4-35.4-6.8-26.5 2.9-51.4 9.2-63.4 0 0-4.5-6-8.3-9.2 0 0-14.2 0-25.4 5.5 12.3-15.7 26-14.9 26-14.9 0-6.6-.6-15.4-3.7-22.3-5.6-11.4-24.6-13.3-32.7 2.9.1-.2.3-.4.4-.5-5.2 12.3-1.1 57.7 17.4 90-2.6 1.4-9.4 6.3-13.4 10.3-22.3 10-58 62.2-58 62.2-29.1 11.1-79.7 52.5-72.9 82.3.3 3.1 1.4 5.7 3.1 7.7-2.9 2.3-5.7 5.2-8.6 8.6-12.3 14.2-5.5 36.3 18.3 25.2 16.3-7.4 30.6-20.9 37.5-31.4 0 0-5.7-5.2-16.8-4.5 28.6-6.8 35.4-9.7 47.7-9.4 8.3 4 8.3-35.4 8.3-35.4 0-15.2-2.3-32-11.5-42.8 12.9 12.6 30 33.8 28.9 62.6-.8 18.9-15.7 23.7-15.7 23.7-9.4 17.1-44.6 68-31.4 109.4 0 0-10-15.4-10.5-22.8-18 20-48 54-25.4 66.6 27.5 15.2 112.3-91.5 130.3-146.9 35.7-21.5 57.2-48.8 66-67.1C362 284 437.7 336.6 443.7 300"></path></svg> </a> Документация Grav CMS на русском </label> <div class="md-nav__source"> <a href="https://github.com/dragomano/Grav-Learn-Ru" title="Перейти к репозиторию" class="md-source" data-md-component="source"> <div class="md-source__icon md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class="md-source__repository"> GitHub </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../.." class="md-nav__link"> <span class="md-ellipsis"> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2"> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> <span class="md-ellipsis"> Основы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Основы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../basics/what-is-grav/" class="md-nav__link"> <span class="md-ellipsis"> Что такое Grav? </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/requirements/" class="md-nav__link"> <span class="md-ellipsis"> Требования </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/installation/" class="md-nav__link"> <span class="md-ellipsis"> Установка </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/basic-tutorial/" class="md-nav__link"> <span class="md-ellipsis"> Краткое руководство </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/grav-configuration/" class="md-nav__link"> <span class="md-ellipsis"> Настройка </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/folder-structure/" class="md-nav__link"> <span class="md-ellipsis"> Структура папок </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/getting-help/" class="md-nav__link"> <span class="md-ellipsis"> Получение помощи </span> </a> </li> <li class="md-nav__item"> <a href="../../basics/updates/" class="md-nav__link"> <span class="md-ellipsis"> Обновление Grav и плагинов </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3"> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> <span class="md-ellipsis"> Контент </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Контент </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../content/content-pages/" class="md-nav__link"> <span class="md-ellipsis"> Страницы </span> </a> </li> <li class="md-nav__item"> <a href="../../content/headers/" class="md-nav__link"> <span class="md-ellipsis"> Заголовки / Frontmatter </span> </a> </li> <li class="md-nav__item"> <a href="../../content/collections/" class="md-nav__link"> <span class="md-ellipsis"> Коллекции страниц </span> </a> </li> <li class="md-nav__item"> <a href="../../content/markdown/" class="md-nav__link"> <span class="md-ellipsis"> Синтаксис Markdown </span> </a> </li> <li class="md-nav__item"> <a href="../../content/linking/" class="md-nav__link"> <span class="md-ellipsis"> Ссылки на страницы </span> </a> </li> <li class="md-nav__item"> <a href="../../content/image-linking/" class="md-nav__link"> <span class="md-ellipsis"> Ссылки на изображения </span> </a> </li> <li class="md-nav__item"> <a href="../../content/media/" class="md-nav__link"> <span class="md-ellipsis"> Медиа </span> </a> </li> <li class="md-nav__item"> <a href="../../content/taxonomy/" class="md-nav__link"> <span class="md-ellipsis"> Таксономия </span> </a> </li> <li class="md-nav__item"> <a href="../../content/modular/" class="md-nav__link"> <span class="md-ellipsis"> Модульные страницы </span> </a> </li> <li class="md-nav__item"> <a href="../../content/routing/" class="md-nav__link"> <span class="md-ellipsis"> Маршрутизация </span> </a> </li> <li class="md-nav__item"> <a href="../../content/multi-language/" class="md-nav__link"> <span class="md-ellipsis"> Мультиязычность </span> </a> </li> <li class="md-nav__item"> <a href="../../content/content-types/" class="md-nav__link"> <span class="md-ellipsis"> Типы контента </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4"> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> <span class="md-ellipsis"> Темы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Темы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../themes/theme-basics/" class="md-nav__link"> <span class="md-ellipsis"> Основы тем </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/theme-tutorial/" class="md-nav__link"> <span class="md-ellipsis"> Учебник по темам </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/twig-primer/" class="md-nav__link"> <span class="md-ellipsis"> Шаблонизатор Twig </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4"> <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0"> <span class="md-ellipsis"> Теги, фильтры и функции Twig </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_4_4"> <span class="md-nav__icon md-icon"></span> Теги, фильтры и функции Twig </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../themes/twig-tags-filters-functions/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/twig-tags-filters-functions/tags/" class="md-nav__link"> <span class="md-ellipsis"> Теги Twig </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/twig-tags-filters-functions/filters/" class="md-nav__link"> <span class="md-ellipsis"> Фильтры Twig </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/twig-tags-filters-functions/functions/" class="md-nav__link"> <span class="md-ellipsis"> Функции Twig </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../themes/theme-configuration/" class="md-nav__link"> <span class="md-ellipsis"> Конфигурация темы </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/theme-vars/" class="md-nav__link"> <span class="md-ellipsis"> Переменные темы </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/asset-manager/" class="md-nav__link"> <span class="md-ellipsis"> Менеджер активов </span> </a> </li> <li class="md-nav__item"> <a href="../../themes/customization/" class="md-nav__link"> <span class="md-ellipsis"> Кастомизация </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5"> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> <span class="md-ellipsis"> Плагины </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> Плагины </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../plugins/plugin-basics/" class="md-nav__link"> <span class="md-ellipsis"> Основы плагинов </span> </a> </li> <li class="md-nav__item"> <a href="../../plugins/plugin-install/" class="md-nav__link"> <span class="md-ellipsis"> Установка плагинов </span> </a> </li> <li class="md-nav__item"> <a href="../../plugins/plugin-tutorial/" class="md-nav__link"> <span class="md-ellipsis"> Создание плагинов </span> </a> </li> <li class="md-nav__item"> <a href="../../plugins/event-hooks/" class="md-nav__link"> <span class="md-ellipsis"> Хуки событий </span> </a> </li> <li class="md-nav__item"> <a href="../../plugins/grav-lifecycle/" class="md-nav__link"> <span class="md-ellipsis"> Жизненный цикл Grav </span> </a> </li> <li class="md-nav__item"> <a href="../../plugins/plugin-flex/" class="md-nav__link"> <span class="md-ellipsis"> Использование Flex в плагинах </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6"> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> <span class="md-ellipsis"> Админка </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Админка </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/introduction/" class="md-nav__link"> <span class="md-ellipsis"> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2"> <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0"> <span class="md-ellipsis"> Дашборд </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_2"> <span class="md-nav__icon md-icon"></span> Дашборд </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/dashboard/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/dashboard/configuration-system/" class="md-nav__link"> <span class="md-ellipsis"> Настройка (система) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/dashboard/configuration-site/" class="md-nav__link"> <span class="md-ellipsis"> Настройка (сайт) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/dashboard/profile/" class="md-nav__link"> <span class="md-ellipsis"> Профиль </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3"> <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0"> <span class="md-ellipsis"> Учётные записи и группы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_3"> <span class="md-nav__icon md-icon"></span> Учётные записи и группы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/accounts/users/" class="md-nav__link"> <span class="md-ellipsis"> Учётные записи </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/accounts/groups/" class="md-nav__link"> <span class="md-ellipsis"> Группы пользователей </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/accounts/configuration/" class="md-nav__link"> <span class="md-ellipsis"> Настройка </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/accounts/permissions/" class="md-nav__link"> <span class="md-ellipsis"> Разрешения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4"> <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0"> <span class="md-ellipsis"> Страницы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_4"> <span class="md-nav__icon md-icon"></span> Страницы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/page/" class="md-nav__link"> <span class="md-ellipsis"> Страницы </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/editor/" class="md-nav__link"> <span class="md-ellipsis"> Редактор (содержание) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/options/" class="md-nav__link"> <span class="md-ellipsis"> Редактор (опции) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/advanced/" class="md-nav__link"> <span class="md-ellipsis"> Редактор (экспертный) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/security/" class="md-nav__link"> <span class="md-ellipsis"> Редактор (безопасность) </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/configuration/" class="md-nav__link"> <span class="md-ellipsis"> Настройка </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/page/permissions/" class="md-nav__link"> <span class="md-ellipsis"> Разрешения страницы </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_5"> <label class="md-nav__link" for="__nav_6_5" id="__nav_6_5_label" tabindex="0"> <span class="md-ellipsis"> Плагины </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_5"> <span class="md-nav__icon md-icon"></span> Плагины </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/plugins/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/plugins/options/" class="md-nav__link"> <span class="md-ellipsis"> Параметры </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../admin-panel/themes/" class="md-nav__link"> <span class="md-ellipsis"> Темы </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_7"> <label class="md-nav__link" for="__nav_6_7" id="__nav_6_7_label" tabindex="0"> <span class="md-ellipsis"> Безопасность </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_7"> <span class="md-nav__icon md-icon"></span> Безопасность </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/security/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/security/2fa/" class="md-nav__link"> <span class="md-ellipsis"> Двухфакторная аутентификация </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/security/rate-limiting/" class="md-nav__link"> <span class="md-ellipsis"> Защита от флуда </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../admin-panel/tools/" class="md-nav__link"> <span class="md-ellipsis"> Сервис </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_9"> <label class="md-nav__link" for="__nav_6_9" id="__nav_6_9_label" tabindex="0"> <span class="md-ellipsis"> Расширение админки </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_9_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_6_9"> <span class="md-nav__icon md-icon"></span> Расширение админки </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../admin-panel/extending/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../admin-panel/extending/admin-events/" class="md-nav__link"> <span class="md-ellipsis"> Хуки событий админки </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../../admin-panel/faq/" class="md-nav__link"> <span class="md-ellipsis"> ЧаВо </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7"> <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0"> <span class="md-ellipsis"> Формы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7"> <span class="md-nav__icon md-icon"></span> Формы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../forms/" class="md-nav__link"> <span class="md-ellipsis"> Введение </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2"> <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0"> <span class="md-ellipsis"> Чертежи </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7_2"> <span class="md-nav__icon md-icon"></span> Чертежи </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../forms/blueprints/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/fields-available/" class="md-nav__link"> <span class="md-ellipsis"> Чертеж полей формы </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/example-plugin-blueprint/" class="md-nav__link"> <span class="md-ellipsis"> Чертеж плагина </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/example-plugin-configuration/" class="md-nav__link"> <span class="md-ellipsis"> Конфигурация плагина </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/example-page-blueprint/" class="md-nav__link"> <span class="md-ellipsis"> Чертежи страниц </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/example-config-blueprints/" class="md-nav__link"> <span class="md-ellipsis"> Чертежи конфигурации </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/how-to-add-file-upload/" class="md-nav__link"> <span class="md-ellipsis"> Как добавить поле для загрузки файлов </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/blueprints/advanced-features/" class="md-nav__link"> <span class="md-ellipsis"> Расширенные возможности чертежей </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_3"> <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0"> <span class="md-ellipsis"> Фронтенд-формы </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_7_3"> <span class="md-nav__icon md-icon"></span> Фронтенд-формы </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../forms/forms/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/form-options/" class="md-nav__link"> <span class="md-ellipsis"> Параметры формы </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/fields-available/" class="md-nav__link"> <span class="md-ellipsis"> Индекс поля формы </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/example-form/" class="md-nav__link"> <span class="md-ellipsis"> Контактная форма </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/reference-form-actions/" class="md-nav__link"> <span class="md-ellipsis"> Действия формы </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/how-to-forms-in-modular-pages/" class="md-nav__link"> <span class="md-ellipsis"> Как разместить формы на модульных страницах </span> </a> </li> <li class="md-nav__item"> <a href="../../forms/forms/how-to-ajax-submission/" class="md-nav__link"> <span class="md-ellipsis"> Как сделать отправку через Ajax </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8"> <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0"> <span class="md-ellipsis"> Консоль CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_8"> <span class="md-nav__icon md-icon"></span> Консоль CLI </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../cli-console/command-line-intro/" class="md-nav__link"> <span class="md-ellipsis"> Введение в командную строку </span> </a> </li> <li class="md-nav__item"> <a href="../../cli-console/grav-cli/" class="md-nav__link"> <span class="md-ellipsis"> Команды Grav </span> </a> </li> <li class="md-nav__item"> <a href="../../cli-console/grav-cli-plugin/" class="md-nav__link"> <span class="md-ellipsis"> Команды плагинов </span> </a> </li> <li class="md-nav__item"> <a href="../../cli-console/grav-cli-gpm/" class="md-nav__link"> <span class="md-ellipsis"> Команды GPM </span> </a> </li> <li class="md-nav__item"> <a href="../../cli-console/scripted-upgrades/" class="md-nav__link"> <span class="md-ellipsis"> Обновления по сценарию </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9"> <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0"> <span class="md-ellipsis"> Дополнительно </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9"> <span class="md-nav__icon md-icon"></span> Дополнительно </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1"> <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0"> <span class="md-ellipsis"> Объекты Flex </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_1"> <span class="md-nav__icon md-icon"></span> Объекты Flex </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/flex/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_2"> <label class="md-nav__link" for="__nav_9_1_2" id="__nav_9_1_2_label" tabindex="0"> <span class="md-ellipsis"> Управление </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_1_2"> <span class="md-nav__icon md-icon"></span> Управление </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/flex/administration/" class="md-nav__link"> <span class="md-ellipsis"> Управление </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/administration/introduction/" class="md-nav__link"> <span class="md-ellipsis"> Первые шаги </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/administration/views-list/" class="md-nav__link"> <span class="md-ellipsis"> Список контента </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/administration/views-edit/" class="md-nav__link"> <span class="md-ellipsis"> Редактор контента </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/administration/configuration/" class="md-nav__link"> <span class="md-ellipsis"> Настройка </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_3"> <label class="md-nav__link" for="__nav_9_1_3" id="__nav_9_1_3_label" tabindex="0"> <span class="md-ellipsis"> Использование объектов Flex </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_1_3"> <span class="md-nav__icon md-icon"></span> Использование объектов Flex </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/flex/using/" class="md-nav__link"> <span class="md-ellipsis"> Использование объектов Flex </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/using/flex/" class="md-nav__link"> <span class="md-ellipsis"> Flex </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/using/directory/" class="md-nav__link"> <span class="md-ellipsis"> Каталог Flex </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/using/collection/" class="md-nav__link"> <span class="md-ellipsis"> Коллекция Flex </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/using/object/" class="md-nav__link"> <span class="md-ellipsis"> Объект Flex </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_4"> <label class="md-nav__link" for="__nav_9_1_4" id="__nav_9_1_4_label" tabindex="0"> <span class="md-ellipsis"> Пользовательские типы каталогов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_1_4"> <span class="md-nav__icon md-icon"></span> Пользовательские типы каталогов </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/flex/custom-types/" class="md-nav__link"> <span class="md-ellipsis"> Пользовательские типы каталогов </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/flex/custom-types/blueprint/" class="md-nav__link"> <span class="md-ellipsis"> Чертёж </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2"> <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0"> <span class="md-ellipsis"> Производительность и кэширование </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_2"> <span class="md-nav__icon md-icon"></span> Производительность и кэширование </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/performance-and-caching/" class="md-nav__link"> <span class="md-ellipsis"> Производительность и кэширование </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3"> <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0"> <span class="md-ellipsis"> Отладка и ведение журнала </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_3"> <span class="md-nav__icon md-icon"></span> Отладка и ведение журнала </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/debugging/" class="md-nav__link"> <span class="md-ellipsis"> Отладка и ведение журнала </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4"> <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0"> <span class="md-ellipsis"> Конфигурация окружения </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_4"> <span class="md-nav__icon md-icon"></span> Конфигурация окружения </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/environment-config/" class="md-nav__link"> <span class="md-ellipsis"> Конфигурация окружения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_5"> <label class="md-nav__link" for="__nav_9_5" id="__nav_9_5_label" tabindex="0"> <span class="md-ellipsis"> Настройка мультисайта </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_5"> <span class="md-nav__icon md-icon"></span> Настройка мультисайта </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/multisite-setup/" class="md-nav__link"> <span class="md-ellipsis"> Настройка мультисайта </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_6"> <label class="md-nav__link" for="__nav_9_6" id="__nav_9_6_label" tabindex="0"> <span class="md-ellipsis"> Приоритезация плагинов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_6_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_6"> <span class="md-nav__icon md-icon"></span> Приоритезация плагинов </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/plugin-prioritization/" class="md-nav__link"> <span class="md-ellipsis"> Приоритезация плагинов </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_7"> <label class="md-nav__link" for="__nav_9_7" id="__nav_9_7_label" tabindex="0"> <span class="md-ellipsis"> Планировщик </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_7_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_7"> <span class="md-nav__icon md-icon"></span> Планировщик </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/scheduler/" class="md-nav__link"> <span class="md-ellipsis"> Планировщик </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_8"> <label class="md-nav__link" for="__nav_9_8" id="__nav_9_8_label" tabindex="0"> <span class="md-ellipsis"> Резервные копии </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_8_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_8"> <span class="md-nav__icon md-icon"></span> Резервные копии </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/backups/" class="md-nav__link"> <span class="md-ellipsis"> Резервные копии </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_9"> <label class="md-nav__link" for="__nav_9_9" id="__nav_9_9_label" tabindex="0"> <span class="md-ellipsis"> Разработка Grav </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_9_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_9"> <span class="md-nav__icon md-icon"></span> Разработка Grav </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/grav-development/" class="md-nav__link"> <span class="md-ellipsis"> Разработка Grav </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/grav-development/grav-15-upgrade-guide/" class="md-nav__link"> <span class="md-ellipsis"> Руководство по обновлению Grav с версии меньше 1.6 </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/grav-development/grav-16-upgrade-guide/" class="md-nav__link"> <span class="md-ellipsis"> Руководство по обновлению до Grav 1.6 </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/grav-development/grav-17-upgrade-guide/" class="md-nav__link"> <span class="md-ellipsis"> Руководство по обновлению до Grav 1.7 </span> </a> </li> <li class="md-nav__item"> <a href="../../advanced/grav-development/grav-18-upgrade-guide/" class="md-nav__link"> <span class="md-ellipsis"> Руководство по обновлению до Grav 1.8 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_10"> <label class="md-nav__link" for="__nav_9_10" id="__nav_9_10_label" tabindex="0"> <span class="md-ellipsis"> Синтаксис YAML </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_10_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_10"> <span class="md-nav__icon md-icon"></span> Синтаксис YAML </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/yaml/" class="md-nav__link"> <span class="md-ellipsis"> Синтаксис YAML </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_11"> <label class="md-nav__link" for="__nav_9_11" id="__nav_9_11_label" tabindex="0"> <span class="md-ellipsis"> Группы и разрешения </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_11_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_11"> <span class="md-nav__icon md-icon"></span> Группы и разрешения </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/groups-and-permissions/" class="md-nav__link"> <span class="md-ellipsis"> Группы и разрешения </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_12"> <label class="md-nav__link" for="__nav_9_12" id="__nav_9_12_label" tabindex="0"> <span class="md-ellipsis"> Изменение URL-адреса сайта </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_12_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_9_12"> <span class="md-nav__icon md-icon"></span> Изменение URL-адреса сайта </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../advanced/change-site-url/" class="md-nav__link"> <span class="md-ellipsis"> Изменение URL-адреса сайта </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10"> <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0"> <span class="md-ellipsis"> Веб-серверы и хостинг </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_10"> <span class="md-nav__icon md-icon"></span> Веб-серверы и хостинг </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../webservers-hosting/servers/grav-built-in/" class="md-nav__link"> <span class="md-ellipsis"> Встроенный веб-сервер Grav </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/servers/nginx/" class="md-nav__link"> <span class="md-ellipsis"> Nginx </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/vps/generic/" class="md-nav__link"> <span class="md-ellipsis"> Универсальная установка VPS </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/vps/ubuntu-18.04/" class="md-nav__link"> <span class="md-ellipsis"> Установка VPS на Ubuntu 18.04 </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/local-development-with-ddev/" class="md-nav__link"> <span class="md-ellipsis"> Локальная разработка с ddev </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/deploying-with-git/" class="md-nav__link"> <span class="md-ellipsis"> Развёртывание с помощью Git </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/php-built-in-web-server/" class="md-nav__link"> <span class="md-ellipsis"> Тестовый хостинг со встроенным веб-сервером PHP </span> </a> </li> <li class="md-nav__item"> <a href="../../webservers-hosting/windows-subsystem-for-linux/" class="md-nav__link"> <span class="md-ellipsis"> Подсистема Windows для Linux </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" checked> <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0"> <span class="md-ellipsis"> Сборник рецептов </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="true"> <label class="md-nav__title" for="__nav_11"> <span class="md-nav__icon md-icon"></span> Сборник рецептов </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../general-recipes/" class="md-nav__link"> <span class="md-ellipsis"> Общие рецепты </span> </a> </li> <li class="md-nav__item"> <a href="../twig-recipes/" class="md-nav__link"> <span class="md-ellipsis"> Рецепты Twig </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc"> <label class="md-nav__link md-nav__link--active" for="__toc"> <span class="md-ellipsis"> Рецепты плагинов </span> <span class="md-nav__icon md-icon"></span> </label> <a href="./" class="md-nav__link md-nav__link--active"> <span class="md-ellipsis"> Рецепты плагинов </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Содержание"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#na-vykhode-kakoi-to-php-kod-v-shablon-twig" class="md-nav__link"> <span class="md-ellipsis"> На выходе какой-то PHP-код в шаблон Twig </span> </a> </li> <li class="md-nav__item"> <a href="#filtratsiia-taksonomii-s-pomoshchiu-plagina-taxonomylist" class="md-nav__link"> <span class="md-ellipsis"> Фильтрация таксономий с помощью плагина taxonomylist </span> </a> </li> <li class="md-nav__item"> <a href="#dobavlenie-knopki-poiska-v-plagin-simplesearch" class="md-nav__link"> <span class="md-ellipsis"> Добавление кнопки поиска в плагин SimpleSearch </span> </a> </li> <li class="md-nav__item"> <a href="#iteratsii-po-stranitsam-i-media" class="md-nav__link"> <span class="md-ellipsis"> Итерации по страницам и медиа </span> </a> </li> <li class="md-nav__item"> <a href="#plagin-polzovatelskikh-shablonov-twig" class="md-nav__link"> <span class="md-ellipsis"> Плагин пользовательских шаблонов Twig </span> </a> </li> <li class="md-nav__item"> <a href="#ispolzovanie-kesha-v-vashikh-sobstvennykh-plaginakh" class="md-nav__link"> <span class="md-ellipsis"> Использование кэша в ваших собственных плагинах </span> </a> </li> <li class="md-nav__item"> <a href="#obuchenie-na-primere" class="md-nav__link"> <span class="md-ellipsis"> Обучение на примере </span> </a> <nav class="md-nav" aria-label="Обучение на примере"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#kak-ia-mogu-chitat-i-zapisyvat-dannye-v-failovuiu-sistemu" class="md-nav__link"> <span class="md-ellipsis"> Как я могу читать и записывать данные в файловую систему? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-sdelat-dannye-iz-plagina-dostupnymi-dlia-twig" class="md-nav__link"> <span class="md-ellipsis"> Как сделать данные из плагина доступными для Twig? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-ia-mogu-vvesti-markdown-na-stranitsu" class="md-nav__link"> <span class="md-ellipsis"> Как я могу ввести Markdown на страницу? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vnedrit-html-v-konechnyi-rezultat" class="md-nav__link"> <span class="md-ellipsis"> Как мне внедрить HTML в конечный результат? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vnedrit-takie-resursy-kak-faily-javascript-i-css" class="md-nav__link"> <span class="md-ellipsis"> Как мне внедрить такие ресурсы, как файлы JavaScript и CSS? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-ia-mogu-povliiat-na-zagolovki-otvetov-i-kody-otvetov" class="md-nav__link"> <span class="md-ellipsis"> Как я могу повлиять на заголовки ответов и коды ответов? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-vkliuchit-storonnie-biblioteki-v-svoi-plagin" class="md-nav__link"> <span class="md-ellipsis"> Как включить сторонние библиотеки в свой плагин? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-rasshirit-twig" class="md-nav__link"> <span class="md-ellipsis"> Как мне расширить Twig? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vzaimodeistvovat-s-vneshnimi-api" class="md-nav__link"> <span class="md-ellipsis"> Как мне взаимодействовать с внешними API? </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="../admin-recipes/" class="md-nav__link"> <span class="md-ellipsis"> Рецепты админки </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11_5"> <label class="md-nav__link" for="__nav_11_5" id="__nav_11_5_label" tabindex="0"> <span class="md-ellipsis"> Создание блога </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_11_5_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_11_5"> <span class="md-nav__icon md-icon"></span> Создание блога </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../tutorials/create-a-blog/" class="md-nav__link"> <span class="md-ellipsis"> Создание блога </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12"> <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0"> <span class="md-ellipsis"> Решение проблем </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_12"> <span class="md-nav__icon md-icon"></span> Решение проблем </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../troubleshooting/common-problems/" class="md-nav__link"> <span class="md-ellipsis"> Общие проблемы </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/page-not-found/" class="md-nav__link"> <span class="md-ellipsis"> Страница не найдена — 404 </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/server-error/" class="md-nav__link"> <span class="md-ellipsis"> Ошибка сервера </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/internal-server-error/" class="md-nav__link"> <span class="md-ellipsis"> Внутренняя ошибка сервера — 500 </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/forbidden/" class="md-nav__link"> <span class="md-ellipsis"> Доступ запрещён — 403 </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/invalid-security-token/" class="md-nav__link"> <span class="md-ellipsis"> Неверный токен безопасности </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/permissions/" class="md-nav__link"> <span class="md-ellipsis"> Разрешения </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/proxy/" class="md-nav__link"> <span class="md-ellipsis"> Проблемы с прокси </span> </a> </li> <li class="md-nav__item"> <a href="../../troubleshooting/htaccess/" class="md-nav__link"> <span class="md-ellipsis"> .htaccess </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="https://learn.getgrav.org/migration" class="md-nav__link"> <span class="md-ellipsis"> Переезд с других движков </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14"> <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0"> <span class="md-ellipsis"> Политики безопасности </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_14"> <span class="md-nav__icon md-icon"></span> Политики безопасности </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../security/overview/" class="md-nav__link"> <span class="md-ellipsis"> Обзор </span> </a> </li> <li class="md-nav__item"> <a href="../../security/configuration/" class="md-nav__link"> <span class="md-ellipsis"> Рекомендуемая конфигурация </span> </a> </li> <li class="md-nav__item"> <a href="../../security/users/" class="md-nav__link"> <span class="md-ellipsis"> Пользователям </span> </a> </li> <li class="md-nav__item"> <a href="../../security/developers/" class="md-nav__link"> <span class="md-ellipsis"> Разработчикам </span> </a> </li> <li class="md-nav__item"> <a href="../../security/server-side/" class="md-nav__link"> <span class="md-ellipsis"> На стороне сервера </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a href="https://learn.getgrav.org/api" class="md-nav__link"> <span class="md-ellipsis"> API </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16"> <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0"> <span class="md-ellipsis"> Лайфхаки </span> <span class="md-nav__icon md-icon"></span> </label> <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false"> <label class="md-nav__title" for="__nav_16"> <span class="md-nav__icon md-icon"></span> Лайфхаки </label> <ul class="md-nav__list" data-md-scrollfix> <li class="md-nav__item"> <a href="../../hints-tips/metadata/" class="md-nav__link"> <span class="md-ellipsis"> Метаданные блогов </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav class="md-nav md-nav--secondary" aria-label="Содержание"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Содержание </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix> <li class="md-nav__item"> <a href="#na-vykhode-kakoi-to-php-kod-v-shablon-twig" class="md-nav__link"> <span class="md-ellipsis"> На выходе какой-то PHP-код в шаблон Twig </span> </a> </li> <li class="md-nav__item"> <a href="#filtratsiia-taksonomii-s-pomoshchiu-plagina-taxonomylist" class="md-nav__link"> <span class="md-ellipsis"> Фильтрация таксономий с помощью плагина taxonomylist </span> </a> </li> <li class="md-nav__item"> <a href="#dobavlenie-knopki-poiska-v-plagin-simplesearch" class="md-nav__link"> <span class="md-ellipsis"> Добавление кнопки поиска в плагин SimpleSearch </span> </a> </li> <li class="md-nav__item"> <a href="#iteratsii-po-stranitsam-i-media" class="md-nav__link"> <span class="md-ellipsis"> Итерации по страницам и медиа </span> </a> </li> <li class="md-nav__item"> <a href="#plagin-polzovatelskikh-shablonov-twig" class="md-nav__link"> <span class="md-ellipsis"> Плагин пользовательских шаблонов Twig </span> </a> </li> <li class="md-nav__item"> <a href="#ispolzovanie-kesha-v-vashikh-sobstvennykh-plaginakh" class="md-nav__link"> <span class="md-ellipsis"> Использование кэша в ваших собственных плагинах </span> </a> </li> <li class="md-nav__item"> <a href="#obuchenie-na-primere" class="md-nav__link"> <span class="md-ellipsis"> Обучение на примере </span> </a> <nav class="md-nav" aria-label="Обучение на примере"> <ul class="md-nav__list"> <li class="md-nav__item"> <a href="#kak-ia-mogu-chitat-i-zapisyvat-dannye-v-failovuiu-sistemu" class="md-nav__link"> <span class="md-ellipsis"> Как я могу читать и записывать данные в файловую систему? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-sdelat-dannye-iz-plagina-dostupnymi-dlia-twig" class="md-nav__link"> <span class="md-ellipsis"> Как сделать данные из плагина доступными для Twig? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-ia-mogu-vvesti-markdown-na-stranitsu" class="md-nav__link"> <span class="md-ellipsis"> Как я могу ввести Markdown на страницу? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vnedrit-html-v-konechnyi-rezultat" class="md-nav__link"> <span class="md-ellipsis"> Как мне внедрить HTML в конечный результат? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vnedrit-takie-resursy-kak-faily-javascript-i-css" class="md-nav__link"> <span class="md-ellipsis"> Как мне внедрить такие ресурсы, как файлы JavaScript и CSS? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-ia-mogu-povliiat-na-zagolovki-otvetov-i-kody-otvetov" class="md-nav__link"> <span class="md-ellipsis"> Как я могу повлиять на заголовки ответов и коды ответов? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-vkliuchit-storonnie-biblioteki-v-svoi-plagin" class="md-nav__link"> <span class="md-ellipsis"> Как включить сторонние библиотеки в свой плагин? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-rasshirit-twig" class="md-nav__link"> <span class="md-ellipsis"> Как мне расширить Twig? </span> </a> </li> <li class="md-nav__item"> <a href="#kak-mne-vzaimodeistvovat-s-vneshnimi-api" class="md-nav__link"> <span class="md-ellipsis"> Как мне взаимодействовать с внешними API? </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <a href="https://github.com/dragomano/Grav-Learn-Ru/edit/master/docs/cookbook/plugin-recipes/index.md" title="Редактировать страницу" class="md-content__button md-icon" rel="edit"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg> </a> <div><h1 id="retsepty-plaginov">Рецепты плагинов<a class="headerlink" href="#retsepty-plaginov" title="Постоянная ссылка">⚓︎</a></h1> <p>Эта страница содержит целый ряд проблем и их соответствующих решений, связанных с плагинами Grav.</p> <h2 id="na-vykhode-kakoi-to-php-kod-v-shablon-twig">На выходе какой-то PHP-код в шаблон Twig<a class="headerlink" href="#na-vykhode-kakoi-to-php-kod-v-shablon-twig" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>Вы хотите обработать некоторый пользовательский PHP-код и сделать результат доступным на странице.</p> </div> <p>Вы создаете новый плагин, который создает расширение Twig и делает часть содержимого PHP доступной в ваших шаблонах Twig.</p> <p>Создайте новую папку плагина в <code>user/plugins/example</code> и добавьте эти файлы:</p> <p><code>user/plugins/example/example.php</code> <code>user/plugins/example/example.yaml</code> <code>user/plugins/example/twig/ExampleTwigExtension.php</code></p> <p>В <code>twig/ExampleTwigExtension.php</code> вы выполните свою собственную обработку и вернете её в виде строки в <code>exampleFunction()</code>.</p> <p>Затем в вашем файле шаблона Twig (или в файле Markdown страницы, если вы включили обработку Twig в Pages) визуализируйте вывод, используя: <code>{{ example() }}</code>.</p> <p>Обзор окончен, давайте посмотрим на код:</p> <div class="highlight"><span class="filename">example.php</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">namespace</span> <span class="nx">Grav\Plugin</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="k">use</span> <span class="nx">\Grav\Common\Plugin</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="k">class</span> <span class="nc">ExamplePlugin</span> <span class="k">extends</span> <span class="nx">Plugin</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">{</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getSubscribedEvents</span><span class="p">()</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>    <span class="p">{</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>            <span class="s1">'onTwigExtensions'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'onTwigExtensions'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="p">];</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="p">}</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">onTwigExtensions</span><span class="p">()</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="p">{</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span class="k">require_once</span><span class="p">(</span><span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">'/twig/ExampleTwigExtension.php'</span><span class="p">);</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">grav</span><span class="p">[</span><span class="s1">'twig'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">twig</span><span class="o">-&gt;</span><span class="na">addExtension</span><span class="p">(</span><span class="k">new</span> <span class="nx">ExampleTwigExtension</span><span class="p">());</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="p">}</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="p">}</span>
</code></pre></div> <div class="highlight"><span class="filename">ExampleTwigExtension.php</span><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">namespace</span> <span class="nx">Grav\Plugin</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">use</span> <span class="nx">Grav\Common\Twig\Extension\GravExtension</span><span class="p">;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">class</span> <span class="nc">ExampleTwigExtension</span> <span class="k">extends</span> <span class="nx">GravExtension</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">{</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getName</span><span class="p">()</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="p">{</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>        <span class="k">return</span> <span class="s1">'ExampleTwigExtension'</span><span class="p">;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="p">}</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">getFunctions</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="p">{</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>            <span class="k">new</span> <span class="nx">\Twig_SimpleFunction</span><span class="p">(</span><span class="s1">'example'</span><span class="p">,</span> <span class="p">[</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">'exampleFunction'</span><span class="p">])</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>        <span class="p">];</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    <span class="p">}</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">exampleFunction</span><span class="p">()</span>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>    <span class="p">{</span>
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>        <span class="k">return</span> <span class="s1">'something'</span><span class="p">;</span>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>    <span class="p">}</span>
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="p">}</span>
</code></pre></div> <p><code>example.yaml</code>:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <p>Теперь плагин установлен и включен, и всё должно работать.</p> <h2 id="filtratsiia-taksonomii-s-pomoshchiu-plagina-taxonomylist">Фильтрация таксономий с помощью плагина taxonomylist<a class="headerlink" href="#filtratsiia-taksonomii-s-pomoshchiu-plagina-taxonomylist" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>Вы хотите использовать <a href="https://github.com/getgrav/grav-plugin-taxonomylist">плагин Grav для списка таксономии</a> для перечисления тегов, которые используются в ваших сообщениях в блоге, но вместо того, чтобы перечислять их все, вы только хотите перечислить наиболее часто используемые элементы в данной таксономии (например, пять основных тегов).</p> </div> <p>Это пример того, как гибкость плагинов Grav действительно пригодится. Первый шаг - убедиться, что у вас установлен <a href="https://github.com/getgrav/grav-plugin-taxonomylist">плагин Grav для списка таксономии</a> в вашем пакете Grav. После установки убедитесь, что вы скопировали <code>/yoursite/user/plugins/taxonomylist/templates/partials/taxonomylist.html.twig</code> в <code>/yoursite/user/themes/yourtheme/templates/partials/taxonomylist.html.twig</code>, поскольку мы будем вносить изменения в этот файл.</p> <p>Чтобы эта работа работала, мы собираемся ввести три новые переменные: <code>filter</code>, <code>filterstart</code> и <code>filterend</code>, где</p> <ul> <li><strong>filter</strong> - это логическое значение, которому будет присвоено значение <code>true</code>, если мы хотим иметь возможность перечислять только несколько верхних тегов (или любую другую таксономию, которую вы хотите использовать).</li> <li><strong>filterstart</strong> - произвольное целое число, но обычно его следует установить равным нулю. Это индекс в массиве таксономии, с которого вы хотите начать.</li> <li><strong>filterend</strong> - произвольное целое число и индекс в массиве таксономии, которым вы хотите закончить. Обратите внимание, что если вы хотите перечислить пять лучших элементов в своей таксономии, вы должны установить это значение в 5, так как наш цикл будет повторяться до <code>filterend -1</code>.</li> </ul> <p>Следующим шагом будет вызов <code>taxonomylist.html.twig</code> в шаблоне, в котором мы хотим перечислить основные элементы в нашей таксономии. Как обычно, мы будем делать это с помощью <code>{% include %}</code>, как показано в следующем примере фрагмента:</p> <p></p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="cp">{%</span> <span class="k">if</span> <span class="nv">config.plugins.taxonomylist.enabled</span> <span class="cp">%}</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="x">    &lt;div class="sidebar-content"&gt;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="x">        &lt;h4&gt;Popular Tags&lt;/h4&gt;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">include</span> <span class="s1">'partials/taxonomylist.html.twig'</span> <span class="nv">with</span> <span class="o">{</span><span class="s1">'taxonomy':'tag'</span><span class="o">,</span> <span class="nv">filter</span><span class="o">:</span> <span class="kp">true</span><span class="o">,</span> <span class="nv">filterstart</span><span class="o">:</span> <span class="m">0</span><span class="o">,</span> <span class="nv">filterend</span><span class="o">:</span> <span class="m">5</span><span class="o">}</span> <span class="cp">%}</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="x">    &lt;/div&gt;</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div> В этом примере мы собираемся перечислить пять самых популярных тегов. <p>Теперь давайте обратим наше внимание на <code>taxonomylist.html.twig</code>. Для справки, вот код по умолчанию для этого файла при первоначальной установке:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="cp">{%</span> <span class="k">set</span> <span class="nv">taxlist</span> <span class="o">=</span> <span class="nv">taxonomylist.get</span><span class="o">()</span> <span class="cp">%}</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="cp">{%</span> <span class="k">if</span> <span class="nv">taxlist</span> <span class="cp">%}</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="x">    &lt;span class="tags"&gt;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">tax</span><span class="o">,</span><span class="nv">value</span> <span class="k">in</span> <span class="nv">taxlist</span><span class="o">[</span><span class="nv">taxonomy</span><span class="o">]</span> <span class="cp">%}</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="x">            &lt;a href="</span><span class="cp">{{</span> <span class="nv">base_url</span> <span class="cp">}}</span><span class="x">/</span><span class="cp">{{</span> <span class="nv">taxonomy</span> <span class="cp">}}{{</span> <span class="nv">config.system.param_sep</span> <span class="cp">}}{{</span> <span class="nv">tax</span><span class="o">|</span><span class="nf">e</span><span class="o">(</span><span class="s1">'url'</span><span class="o">)</span> <span class="cp">}}</span><span class="x">"&gt;</span><span class="cp">{{</span> <span class="nv">tax</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="x">    &lt;/span&gt;</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div> <p>Чтобы это работало с нашими новыми переменными (например, <code>filter</code>, <code>filterstart</code> и <code>filterend</code>), нам нужно будет включить их в этот файл следующим образом:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="cp">{%</span> <span class="k">set</span> <span class="nv">taxlist</span> <span class="o">=</span> <span class="nv">taxonomylist.get</span> <span class="cp">%}</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="cp">{%</span> <span class="k">if</span> <span class="nv">taxlist</span> <span class="cp">%}</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="x">    </span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">taxlist_taxonomy</span> <span class="o">=</span> <span class="nv">taxlist</span><span class="o">[</span><span class="nv">taxonomy</span><span class="o">]</span> <span class="cp">%}</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">filter</span> <span class="cp">%}</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">set</span> <span class="nv">taxlist_taxonomy</span> <span class="o">=</span> <span class="nv">taxlist_taxonomy</span><span class="o">|</span><span class="nf">slice</span><span class="o">(</span><span class="nv">filterstart</span><span class="o">,</span><span class="nv">filterend</span><span class="o">)</span> <span class="cp">%}</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="x">    </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="x">    &lt;span class="tags"&gt;</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">tax</span><span class="o">,</span><span class="nv">value</span> <span class="k">in</span> <span class="nv">taxlist_taxonomy</span> <span class="cp">%}</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="x">            &lt;a href="</span><span class="cp">{{</span> <span class="nv">base_url</span> <span class="cp">}}</span><span class="x">/</span><span class="cp">{{</span> <span class="nv">taxonomy</span> <span class="cp">}}{{</span> <span class="nv">config.system.param_sep</span> <span class="cp">}}{{</span> <span class="nv">tax</span><span class="o">|</span><span class="nf">e</span><span class="o">(</span><span class="s1">'url'</span><span class="o">)</span> <span class="cp">}}</span><span class="x">"&gt;</span><span class="cp">{{</span> <span class="nv">tax</span> <span class="cp">}}</span><span class="x">&lt;/a&gt;</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="x">        </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="x">    &lt;/span&gt;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div> <p>Здесь файл сначала проверяет, установлен ли <code>filter</code> в значение <code>true</code>. Если это так, цикл for выполняется так же, как и в исходном файле <code>taxonomylist.html.twig</code>, но на этот раз он использует фильтр Twig <code>slice</code>. Этот <code>filter</code>, в нашем случае, извлечет подмножество массива от начального индекса (в нашем случае <code>filterstart</code>) до конечного индекса (в нашем случае <code>filterend -1</code>).</p> <p>Если, с другой стороны, для переменной <code>filter</code> установлено значение <code>false</code> или она не найдена, будут перечислены все элементы в вашей таксономии.</p> <h2 id="dobavlenie-knopki-poiska-v-plagin-simplesearch">Добавление кнопки поиска в плагин SimpleSearch<a class="headerlink" href="#dobavlenie-knopki-poiska-v-plagin-simplesearch" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>Вам действительно нравится <a href="https://github.com/getgrav/grav-plugin-simplesearch">плагин Grav SimpleSearch</a>, но вы хотите добавить кнопку поиска в дополнение к текстовому полю. Одна из причин для добавления этой кнопки заключается в том, что пользователю может быть не очевидно, что ему нужно нажать клавишу «Enter», чтобы инициировать свой поисковый запрос.</p> </div> <p>Сначала убедитесь, что вы установили <a href="https://github.com/getgrav/grav-plugin-simplesearch">плагин Grav SimpleSearch</a>. Затем убедитесь, что вы скопировали <code>/yoursite/user/plugins/simplesearch/templates/partials/simplesearch-searchbox.html.twig</code> в <code>/yoursite/user/themes/yourtheme/templates/partials/simplesearch-searchbox.html.twig</code>, так как нам нужно будет внести изменения в этот файл.</p> <p>Прежде чем идти дальше, давайте рассмотрим, что делает этот файл:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x">&lt;input type="text" placeholder="Search..." value="</span><span class="cp">{{</span> <span class="nv">query</span> <span class="cp">}}</span><span class="x">"cp"&gt;{{</span> <span class="nv">base_url</span> <span class="cp">}}{{</span> <span class="nv">config.plugins.simplesearch.route</span><span class="cp">}}</span><span class="x">/query" /&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">&lt;script&gt;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="x">    jQuery(document).ready(function($) {</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="x">        var input = $('[data-search-input]');</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="x">        input.on('keypress', function(event) {</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="x">            if (event.which == 13 &amp;&amp; input.val().length &gt; 3) {</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="x">                event.preventDefault();</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="x">                window.location.href = input.data('search-input') + '</span><span class="cp">{{</span> <span class="nv">config.system.param_sep</span> <span class="cp">}}</span><span class="x">' + input.val();</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="x">            }</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="x">        });</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="x">    });</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="x">&lt;/script&gt;</span>
</code></pre></div> <p>Первая строка просто вставляет поле ввода текста в ваш шаблон Twig. Атрибут <code>data-search-input</code> хранит базовый URL страницы результирующего запроса. По умолчанию <code>http://yoursite/search/query</code>.</p> <p>Теперь перейдем к jQuery ниже. Здесь тег, содержащий атрибут <code>data-search-input</code>, назначается переменной input. Затем к <code>input</code> применяется метод jQuery <code>.on()</code>. Метод <code>.on()</code> применяет обработчики событий к выбранным элементам (в данном случае к текстовому полю <code>&lt;input&gt;</code>). Итак, когда пользователь нажимает (<code>keypress</code>) клавишу, чтобы начать поиск, оператор <code>if</code> проверяет, что следующие элементы являются <code>истинными</code>:</p> <ol> <li>Была нажата клавиша <code>Enter</code>: <code>event.which == 13</code>, где 13 - числовое значение клавиши <code>Enter</code> на клавиатуре.</li> <li>Количество символов, введенных в поле поиска, больше трех. Вы можете настроить это по своему вкусу, поскольку в вашей организации может быть много сокращений, состоящих из трех или менее символов.</li> </ol> <p>Если они верны, то <code>event.preventDefault();</code> гарантирует, что действие браузера по умолчанию для клавиши <code>Enter</code> игнорируется, так как это помешает нашему поиску. Наконец, создается полный URL-адрес поискового запроса. По умолчанию это <code>http://yoursite/search/query:yourquery</code>. Отсюда <code>/yoursite/user/plugins/simplesearch/simplesearch.php</code> выполняет фактический поиск, а другие файлы Twig в подключаемом модуле выводят результаты.</p> <p>Нет возврата к нашему решению! Если мы хотим добавить кнопку поиска, мы должны:</p> <ol> <li>Добавьте кнопку</li> <li>Обязательно примените к кнопке метод <code>.on()</code>, но на этот раз с помощью <code>click</code> вместо <code>keypress</code></li> </ol> <p>Это достигается с помощью следующего кода, использующего <a href="https://turretcss.com">Turret CSS Framework</a>. Фрагменты кода для других фреймворков будут перечислены в конце.</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group input-group-search"</span><span class="p">&gt;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"search"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Search"</span> <span class="na">value</span><span class="o">=</span><span class="s">"{{ query }}"</span> <span class="na">data-search-input</span><span class="o">=</span><span class="s">"{{ base_url }}{{ config.plugins.simplesearch.route}}/query"</span> <span class="p">&gt;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-button"</span><span class="p">&gt;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"button"</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span><span class="p">&gt;</span>Search<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="s1">'[data-search-input]'</span><span class="p">);</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="nx">searchButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">$</span><span class="p">(</span><span class="s1">'.button.search'</span><span class="p">);</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">        </span><span class="nx">input</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'keypress'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">13</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="w">                </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="w">                </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">'search-input'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'{{ config.system.param_sep }}'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">        </span><span class="p">});</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">        </span><span class="nx">searchButton</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mf">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">                </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">                </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s1">'search-input'</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">'{{ config.system.param_sep }}'</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">input</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">        </span><span class="p">});</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">    </span><span class="p">});</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div> <p>Атрибуты HTML и class специфичны для Turret, но конечный результат будет <a href="https://turretcss.com/form/input-group/">что-то вроде этого</a>. Мы также можем видеть, что метод <code>.on()</code> также был назначен кнопке поиска, но он проверяет только то, что количество символов, введенных в поле поиска, больше трех перед выполнением кода в операторе <code>if</code>.</p> <p>Вот HTML-код по умолчанию для текстового поля и кнопка поиска для нескольких других фреймворков:</p> <p><a href="https://getbootstrap.com/"><strong>Bootstrap</strong></a></p> <div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group"</span><span class="p">&gt;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"form-control"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Search for..."</span><span class="p">&gt;</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-group-btn"</span><span class="p">&gt;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>        <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"btn btn-default"</span> <span class="na">type</span><span class="o">=</span><span class="s">"button"</span><span class="p">&gt;</span>Go!<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div> <p><a href="https://materializecss.com/"><strong>Materialize</strong></a></p> <div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"input-field"</span><span class="p">&gt;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">id</span><span class="o">=</span><span class="s">"search"</span> <span class="na">type</span><span class="o">=</span><span class="s">"search"</span> <span class="na">required</span><span class="p">&gt;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">"search"</span><span class="p">&gt;&lt;</span><span class="nt">i</span> <span class="na">class</span><span class="o">=</span><span class="s">"material-icons"</span><span class="p">&gt;</span>search<span class="p">&lt;/</span><span class="nt">i</span><span class="p">&gt;&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div> <p><a href="https://purecss.io"><strong>Pure CSS</strong></a></p> <div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">&lt;</span><span class="nt">form</span> <span class="na">class</span><span class="o">=</span><span class="s">"pure-form"</span><span class="p">&gt;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">class</span><span class="o">=</span><span class="s">"pure-input-rounded"</span><span class="p">&gt;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="na">class</span><span class="o">=</span><span class="s">"pure-button"</span><span class="p">&gt;</span>Search<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</code></pre></div> <p><a href="https://semantic-ui.com/"><strong>Semantic UI</strong></a></p> <div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">"ui action input"</span><span class="p">&gt;</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"text"</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">"Search..."</span><span class="p">&gt;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>  <span class="p">&lt;</span><span class="nt">button</span> <span class="na">class</span><span class="o">=</span><span class="s">"ui button"</span><span class="p">&gt;</span>Search<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</code></pre></div> <h2 id="iteratsii-po-stranitsam-i-media">Итерации по страницам и медиа<a class="headerlink" href="#iteratsii-po-stranitsam-i-media" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>Вы хотите получить доступ ко всем страницам и связанным с каждой страницей носителям через PHP и/или Twig, чтобы над ними можно было зацикливаться или иным образом манипулировать плагином.</p> </div> <p>Используйте возможности Grav для создания рекурсивного индекса всех страниц, а при индексировании также собирайте медиа-файлы для каждой страницы. Плагин <a href="https://github.com/OleVik/grav-plugin-directorylisting/blob/v2.0.0-rc.2/Utilities.php#L64-L105">DirectoryListing</a> делает именно это и создает HTML- список с использованием созданной древовидной структуры. Для этого мы создадим рекурсивную функцию - или метод, который может иметь место в классе плагина, - который просматривает каждую страницу и сохраняет её в массиве. Метод рекурсивен, потому что он снова вызывает себя для каждой найденной страницы, имеющей дочерние элементы.</p> <p>Но обо всем по порядку, метод принимает три параметра: первый - это <code>$route</code> к странице, который сообщает Grav, где его найти; второй - <code>$mode</code>, который сообщает методу, следует ли выполнять итерацию по самой странице или по её дочерним элементам; третий - <code>$depth</code>, который отслеживает, на каком уровне находится страница. Метод сначала создает экземпляр объекта Page, затем работает с глубиной и режимом и создает коллекцию. По умолчанию мы упорядочиваем страницы по дате, по убыванию, но вы можете сделать это настраиваемым. Затем мы создаем массив <code>$paths</code> для хранения каждой страницы. Поскольку маршруты в Grav уникальны, они используются как ключи в этом массиве для идентификации каждой страницы.</p> <p>Теперь мы перебираем страницы, добавляя глубину, заголовок и маршрут (также сохраняемые как значение для облегчения доступа). В цикле foreach мы также пытаемся получить дочерние страницы и добавить их, если они найдены. Также мы находим все медиа, связанные со страницей, и добавляем их. Поскольку метод рекурсивен, он будет продолжать поиск страниц и дочерних страниц до тех пор, пока больше не будет найдено.</p> <p>Возвращаемые данные представляют собой древовидную структуру или многомерный массив, говоря языком PHP, содержащий все страницы и их носители. Это можно передать в Twig или использовать в самом плагине. Обратите внимание, что с очень большими структурами папок PHP может выйти из строя или выйти из строя из-за ограничений рекурсии, например. папки глубиной 100 или более уровней.</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="sd">/**</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="sd"> * Creates page-structure recursively</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="sd"> * @param string $route Route to page</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="sd"> * @param integer $depth Reserved placeholder for recursion depth</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="sd"> * @return array Page-structure with children and media</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="sd"> */</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">buildTree</span><span class="p">(</span><span class="nv">$route</span><span class="p">,</span> <span class="nv">$mode</span> <span class="o">=</span> <span class="k">false</span><span class="p">,</span> <span class="nv">$depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="p">{</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    <span class="nv">$page</span> <span class="o">=</span> <span class="nx">Grav</span><span class="o">::</span><span class="na">instance</span><span class="p">()[</span><span class="s1">'page'</span><span class="p">];</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>    <span class="nv">$depth</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>    <span class="nv">$mode</span> <span class="o">=</span> <span class="s1">'@page.self'</span><span class="p">;</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    <span class="k">if</span> <span class="p">(</span><span class="nv">$depth</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>        <span class="nv">$mode</span> <span class="o">=</span> <span class="s1">'@page.children'</span><span class="p">;</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>    <span class="p">}</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>    <span class="nv">$pages</span> <span class="o">=</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">evaluate</span><span class="p">([</span><span class="nv">$mode</span> <span class="o">=&gt;</span> <span class="nv">$route</span><span class="p">]);</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a>    <span class="nv">$pages</span> <span class="o">=</span> <span class="nv">$pages</span><span class="o">-&gt;</span><span class="na">published</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">order</span><span class="p">(</span><span class="s1">'date'</span><span class="p">,</span> <span class="s1">'desc'</span><span class="p">);</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a>    <span class="nv">$paths</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$pages</span> <span class="k">as</span> <span class="nv">$page</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>        <span class="nv">$route</span> <span class="o">=</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">rawRoute</span><span class="p">();</span>
<a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a>        <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">path</span><span class="p">();</span>
<a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a>        <span class="nv">$title</span> <span class="o">=</span> <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">();</span>
<a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>        <span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">][</span><span class="s1">'depth'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$depth</span><span class="p">;</span>
<a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a>        <span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$title</span><span class="p">;</span>
<a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a>        <span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">][</span><span class="s1">'route'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$route</span><span class="p">;</span>
<a id="__codelineno-12-27" name="__codelineno-12-27" href="#__codelineno-12-27"></a>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">]))</span> <span class="p">{</span>
<a id="__codelineno-12-28" name="__codelineno-12-28" href="#__codelineno-12-28"></a>            <span class="nv">$children</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">buildTree</span><span class="p">(</span><span class="nv">$route</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">,</span> <span class="nv">$depth</span><span class="p">);</span>
<a id="__codelineno-12-29" name="__codelineno-12-29" href="#__codelineno-12-29"></a>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$children</span><span class="p">))</span> <span class="p">{</span>
<a id="__codelineno-12-30" name="__codelineno-12-30" href="#__codelineno-12-30"></a>                <span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">][</span><span class="s1">'children'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$children</span><span class="p">;</span>
<a id="__codelineno-12-31" name="__codelineno-12-31" href="#__codelineno-12-31"></a>            <span class="p">}</span>
<a id="__codelineno-12-32" name="__codelineno-12-32" href="#__codelineno-12-32"></a>        <span class="p">}</span>
<a id="__codelineno-12-33" name="__codelineno-12-33" href="#__codelineno-12-33"></a>        <span class="nv">$media</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Media</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
<a id="__codelineno-12-34" name="__codelineno-12-34" href="#__codelineno-12-34"></a>        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$media</span><span class="o">-&gt;</span><span class="na">all</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$filename</span> <span class="o">=&gt;</span> <span class="nv">$file</span><span class="p">)</span> <span class="p">{</span>
<a id="__codelineno-12-35" name="__codelineno-12-35" href="#__codelineno-12-35"></a>            <span class="nv">$paths</span><span class="p">[</span><span class="nv">$route</span><span class="p">][</span><span class="s1">'media'</span><span class="p">][</span><span class="nv">$filename</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="na">items</span><span class="p">()[</span><span class="s1">'type'</span><span class="p">];</span>
<a id="__codelineno-12-36" name="__codelineno-12-36" href="#__codelineno-12-36"></a>        <span class="p">}</span>
<a id="__codelineno-12-37" name="__codelineno-12-37" href="#__codelineno-12-37"></a>    <span class="p">}</span>
<a id="__codelineno-12-38" name="__codelineno-12-38" href="#__codelineno-12-38"></a>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$paths</span><span class="p">))</span> <span class="p">{</span>
<a id="__codelineno-12-39" name="__codelineno-12-39" href="#__codelineno-12-39"></a>        <span class="k">return</span> <span class="nv">$paths</span><span class="p">;</span>
<a id="__codelineno-12-40" name="__codelineno-12-40" href="#__codelineno-12-40"></a>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-12-41" name="__codelineno-12-41" href="#__codelineno-12-41"></a>        <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
<a id="__codelineno-12-42" name="__codelineno-12-42" href="#__codelineno-12-42"></a>    <span class="p">}</span>
<a id="__codelineno-12-43" name="__codelineno-12-43" href="#__codelineno-12-43"></a><span class="p">}</span>
</code></pre></div> <h2 id="plagin-polzovatelskikh-shablonov-twig">Плагин пользовательских шаблонов Twig<a class="headerlink" href="#plagin-polzovatelskikh-shablonov-twig" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>Вместо использования наследования тем можно создать очень простой плагин, который позволит вам использовать настраиваемое расположение для предоставления настраиваемых шаблонов Twig.</p> </div> <p>Единственное, что вам нужно в этом плагине, - это событие, чтобы указать местоположение для ваших шаблонов. Самый простой способ создать плагин - использовать плагин DevTools. Итак, установите это с помощью:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>$<span class="w"> </span>bin/gpm<span class="w"> </span>install<span class="w"> </span>devtools
</code></pre></div> <p>После установки создайте новый плагин с помощью команды:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>$<span class="w"> </span>bin/plugin<span class="w"> </span>devtools<span class="w"> </span>newplugin
</code></pre></div> <p>Заполните данные для имени, автора и т. д. Скажем, мы называем это <code>Custom Templates</code>, и плагин будет создан в <code>/user/plugins/custom-templates</code>. Все, что вам нужно сделать сейчас, это отредактировать файл <code>custom-templates.php</code> и поместить этот код:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="k">namespace</span> <span class="nx">Grav\Plugin</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="k">use</span> <span class="nx">\Grav\Common\Plugin</span><span class="p">;</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="k">class</span> <span class="nc">CustomTemplatesPlugin</span> <span class="k">extends</span> <span class="nx">Plugin</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="p">{</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="sd">/**</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="sd">     * Subscribe to required events</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="sd">     *</span>
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="sd">     * @return array</span>
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="sd">     */</span>
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getSubscribedEvents</span><span class="p">()</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>    <span class="p">{</span>
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>        <span class="k">return</span> <span class="p">[</span>
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>            <span class="s1">'onTwigTemplatePaths'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'onTwigTemplatePaths'</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>        <span class="p">];</span>
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>    <span class="p">}</span>
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>    <span class="sd">/**</span>
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a><span class="sd">     * Add current directory to twig lookup paths.</span>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a><span class="sd">     */</span>
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>    <span class="k">public</span> <span class="k">function</span> <span class="nf">onTwigTemplatePaths</span><span class="p">()</span>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>    <span class="p">{</span>
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">grav</span><span class="p">[</span><span class="s1">'twig'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">twig_paths</span><span class="p">[]</span> <span class="o">=</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">'/templates'</span><span class="p">;</span>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>    <span class="p">}</span>
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a><span class="p">}</span>
</code></pre></div> <p>Этот плагин просто подписывается на событие <code>onTwigTemplatePaths()</code>, а затем в этом методе события он добавляет папку <code>user/plugins/custom-templates/templates</code> к массиву путей, которые Twig будет проверять.</p> <p>Это позволяет вам добавить шаблон Twig под названием <code>foo.html.twig</code>, и тогда любая страница с именем <code>foo.md</code> сможет использовать этот шаблон.</p> <div class="admonition note"> <p>Это добавит путь настраиваемого шаблона плагина к <strong>концу</strong> массива путей к шаблону Twig. Это означает, что тема (которая всегда стоит первой) будет иметь приоритет над одноименными шаблонами плагина. Чтобы решить эту проблему, просто поместите путь шаблона плагина перед массивом, изменив метод события:</p> </div> <div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="sd">/**</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="sd"> * Add current directory to twig lookup paths.</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="sd">*/</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="k">public</span> <span class="k">function</span> <span class="nf">onTwigTemplatePaths</span><span class="p">()</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="p">{</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>    <span class="nb">array_unshift</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">grav</span><span class="p">[</span><span class="s1">'twig'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">twig_paths</span><span class="p">,</span> <span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">'/templates'</span><span class="p">);</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">}</span>
</code></pre></div> <h2 id="ispolzovanie-kesha-v-vashikh-sobstvennykh-plaginakh">Использование кэша в ваших собственных плагинах<a class="headerlink" href="#ispolzovanie-kesha-v-vashikh-sobstvennykh-plaginakh" title="Постоянная ссылка">⚓︎</a></h2> <div class="admonition question"> <p>При разработке собственных плагинов часто бывает полезно использовать кэш Grav для кэширования данных для повышения производительности. К счастью, это очень простой процесс использования кэша в вашем собственном коде.</p> </div> <p>Это некоторый базовый код, который показывает вам, как работает кэширование:</p> <div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="cp">&lt;?php</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nv">$cache</span> <span class="o">=</span> <span class="nx">Grav</span><span class="o">::</span><span class="na">instance</span><span class="p">()[</span><span class="s1">'cache'</span><span class="p">];</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nv">$id</span> <span class="o">=</span> <span class="s1">'myplugin-data'</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="nv">$list</span> <span class="o">=</span> <span class="p">[];</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="k">if</span> <span class="p">(</span><span class="nv">$data</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">fetch</span><span class="p">(</span><span class="nv">$id</span><span class="p">))</span> <span class="p">{</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>    <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">gatherData</span><span class="p">();</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>    <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$hash</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>    <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="p">}</span>
</code></pre></div> <p>Сначала мы получаем объект кэша Grav, а затем пытаемся проверить, существуют ли наши данные уже в кэше (<code>$data = $cache-&gt;fetch($id)</code>). Если <code>$data</code> существует, просто верните его без необходимости дополнительной работы.</p> <p>Однако, если выборка кэша возвращает null, то есть он не кэшируется, сделайте некоторую <em>работу</em> и получите данные (<code>$data = $this-&gt;gatherData()</code>), а затем просто сохраните данные для следующего раза (<code>$cache-&gt;save($hash, $data)</code>).</p> <h2 id="obuchenie-na-primere">Обучение на примере<a class="headerlink" href="#obuchenie-na-primere" title="Постоянная ссылка">⚓︎</a></h2> <p>Учитывая обилие доступных в настоящее время плагинов, есть вероятность, что вы найдете свои ответы где-то в их исходном коде. Проблема в том, чтобы знать, на какие из них смотреть. Эта страница пытается перечислить общие проблемы плагинов, а затем перечисляет конкретные плагины, которые демонстрируют, как их решать.</p> <p>Прежде чем продолжить, убедитесь, что вы ознакомились с <a href="/plugins">основной документацией</a>, особенно с главой <a href="/plugins/grav-lifecycle">Жизненный цикл Grav</a>!</p> <h3 id="kak-ia-mogu-chitat-i-zapisyvat-dannye-v-failovuiu-sistemu">Как я могу читать и записывать данные в файловую систему?<a class="headerlink" href="#kak-ia-mogu-chitat-i-zapisyvat-dannye-v-failovuiu-sistemu" title="Постоянная ссылка">⚓︎</a></h3> <p>Существует множество способов чтения и записи данных в файловую систему.</p> <ul> <li>Если вам просто нужен доступ для чтения к данным YAML, проверьте плагин <a href="https://github.com/Deester4x4jr/grav-plugin-import">Import</a>.</li> <li>Предпочтительный интерфейс - через встроенный интерфейс <a href="https://raw.githubusercontent.com/rockettheme/toolbox/develop/File/src/File.php">RocketTheme\Toolbox\File</a>.</li> <li>Ничто не мешает вам использовать <a href="https://sqlite.org/">SQLite</a>.</li> <li>Самый простой пример - это, вероятно, <a href="https://github.com/getgrav/grav-plugin-comments">плагин комментариев</a>.</li> <li>Другие включают в себя<ul> <li><a href="https://github.com/Perlkonig/grav-plugin-table-importer">Table Importer</a></li> <li><a href="https://github.com/iusvar/grav-plugin-thumb-ratings">Thumb Ratings</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-webmention">Webmention</a></li> </ul> </li> </ul> <h3 id="kak-sdelat-dannye-iz-plagina-dostupnymi-dlia-twig">Как сделать данные из плагина доступными для Twig?<a class="headerlink" href="#kak-sdelat-dannye-iz-plagina-dostupnymi-dlia-twig" title="Постоянная ссылка">⚓︎</a></h3> <p>Один из способов — через пространство имён <code>config.plugins.X</code>. Просто сделайте <code>$this-&gt;config-&gt;set()</code>, как показано в одном из следующих примеров:</p> <ul> <li><a href="https://github.com/Perlkonig/grav-plugin-iplocate/blob/master/iplocate.php#L82">ipLocate</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-count-views/blob/master/count-views.php#L88">Count Views</a></li> </ul> <p>Затем вы можете получить доступ к этому в шаблоне Twig через <code>{{ config.plugins.X.whatever.variable }}</code>.</p> <p>Кроме того, вы можете передавать переменные через <code>grav['twig']</code>:</p> <ul> <li><a href="https://github.com/Perlkonig/grav-plugin-blogroll/blob/master/blogroll.php#L43">Blogroll</a>, к которому вы затем можете получить прямой доступ <a href="https://github.com/Perlkonig/grav-plugin-blogroll/blob/master/templates/partials/blogroll.html.twig#L32">через ваш шаблон</a>.</li> </ul> <p>Наконец, вы можете ввести данные непосредственно в заголовок страницы, как показано в <a href="https://github.com/Deester4x4jr/grav-plugin-import">плагине импорта</a>.</p> <h3 id="kak-ia-mogu-vvesti-markdown-na-stranitsu">Как я могу ввести Markdown на страницу?<a class="headerlink" href="#kak-ia-mogu-vvesti-markdown-na-stranitsu" title="Постоянная ссылка">⚓︎</a></h3> <p>В соответствии с <a href="/plugins/grav-lifecycle">жизненным циклом Grav</a>, последний хук события, в который вы можете ввести необработанный Markdown, — <code>onPageContentRaw</code>. Самый ранний из них, вероятно, <code>onPageInitialized</code>. Вы можете просто захватить <code>$this-&gt;grav['page']-&gt;rawMarkdown()</code>, изменить его, а затем записать обратно с помощью <code>$this-&gt;grav['page']-&gt;setRawContent()</code>. Следующие плагины демонстрируют это:</p> <ul> <li><a href="https://github.com/getgrav/grav-plugin-page-inject">Page Inject</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-table-importer">Table Importer</a></li> </ul> <h3 id="kak-mne-vnedrit-html-v-konechnyi-rezultat">Как мне внедрить HTML в конечный результат?<a class="headerlink" href="#kak-mne-vnedrit-html-v-konechnyi-rezultat" title="Постоянная ссылка">⚓︎</a></h3> <p>Последний раз вы можете ввести HTML и всё ещё кэшировать свои выходные данные во время события <code>onOutputGenerated</code>. Вы можете просто захватить и изменить <code>$this-&gt;grav-&gt;output</code>.</p> <ul> <li>Многие распространенные задачи могут быть выполнены с помощью <a href="https://github.com/getgrav/grav-plugin-shortcode-core">Shortcode Core</a>.</li> <li>Плагины <a href="https://github.com/Perlkonig/grav-plugin-pubmed">Pubmed</a> и <a href="https://github.com/Perlkonig/grav-plugin-tablesorter">Tablesorter</a> используют более грубый подход.</li> </ul> <h3 id="kak-mne-vnedrit-takie-resursy-kak-faily-javascript-i-css">Как мне внедрить такие ресурсы, как файлы JavaScript и CSS?<a class="headerlink" href="#kak-mne-vnedrit-takie-resursy-kak-faily-javascript-i-css" title="Постоянная ссылка">⚓︎</a></h3> <p>Это делается через интерфейс <a href="https://learn.getgrav.org/api#class-gravcommonassets">Grav\Common\Assets</a>.</p> <ul> <li><a href="https://github.com/escopecz/grav-ganalytics">Google Analytics</a></li> <li><a href="https://github.com/getgrav/grav-plugin-bootstrapper">Bootstrapper</a></li> <li><a href="https://github.com/giansi/gravstrap">Gravstrap</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-tablesorter">Tablesorter</a></li> </ul> <h3 id="kak-ia-mogu-povliiat-na-zagolovki-otvetov-i-kody-otvetov">Как я могу повлиять на заголовки ответов и коды ответов?<a class="headerlink" href="#kak-ia-mogu-povliiat-na-zagolovki-otvetov-i-kody-otvetov" title="Постоянная ссылка">⚓︎</a></h3> <p>Вы можете использовать команду php <code>header()</code> для установки заголовков ответов. Последнее, что вы можете сделать, - это во время события onOutputGenerated, после чего выходные данные фактически отправляются клиенту. Сам код ответа может быть задан только в заголовке YAML соответствующей страницы (<code>http_response_code</code>).</p> <ul> <li>Плагин <a href="https://github.com/Perlkonig/grav-plugin-graveyard">Graveyard</a> плагин заменяет ответы <code>404 NOT FOUND</code> на ответы <code>410 GONE</code> через заголовок YAML.</li> <li>Плагин <a href="https://github.com/Perlkonig/grav-plugin-webmention">Webmention</a> устанавливает заголовок <code>Location</code> в ответе <code>201 CREATED</code>.</li> </ul> <h3 id="kak-vkliuchit-storonnie-biblioteki-v-svoi-plagin">Как включить сторонние библиотеки в свой плагин?<a class="headerlink" href="#kak-vkliuchit-storonnie-biblioteki-v-svoi-plagin" title="Постоянная ссылка">⚓︎</a></h3> <p>Обычно вы включаете другие полные библиотеки во вложенную папку <code>vendor</code> и подключаете его <code>autoload.php</code> там, где это необходимо, в вашем плагине. (Если вы используете Git, подумайте об использовании <a href="https://help.github.com/articles/about-git-subtree-merges/">subtrees</a>)</p> <ul> <li><a href="https://github.com/getgrav/grav-plugin-shortcode-core">Shortcode Core</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-table-importer">Table Importer</a></li> </ul> <h3 id="kak-mne-rasshirit-twig">Как мне расширить Twig?<a class="headerlink" href="#kak-mne-rasshirit-twig" title="Постоянная ссылка">⚓︎</a></h3> <p>Самый простой способ - следовать примеру <a href="../twig-recipes/#polzovatelskii-filtr-funktsiia-twig">Custom Twig Filter/Function</a> в разделе <strong>Рецепты Twig</strong>.</p> <p>Также <a href="https://twig.sensiolabs.org/doc/advanced.html">прочтите документацию Twig</a> и разработайте свое расширение. Затем посмотрите на плагин <a href="https://github.com/kesslernetworks/grav-plugin-twigpcre">TwigPCRE</a>, чтобы узнать, как включить его в Grav.</p> <h3 id="kak-mne-vzaimodeistvovat-s-vneshnimi-api">Как мне взаимодействовать с внешними API?<a class="headerlink" href="#kak-mne-vzaimodeistvovat-s-vneshnimi-api" title="Постоянная ссылка">⚓︎</a></h3> <p>Grav предоставляет объект <a href="https://learn.getgrav.org/api#class-gravcommongpmresponse">Grav\Common\GPM\Response</a>, но ничто не мешает вам сделать это напрямую, если вы того пожелаете.</p> <ul> <li><a href="https://github.com/Perlkonig/grav-plugin-iplocate">ipLocate</a></li> <li><a href="https://github.com/Perlkonig/grav-plugin-pubmed">Pubmed</a></li> </ul></div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type="button" class="md-top md-icon" data-md-component="top" hidden> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> К началу </button> </main> <footer class="md-footer"> <nav class="md-footer__inner md-grid" aria-label="Нижний колонтитул"> <a href="../twig-recipes/" class="md-footer__link md-footer__link--prev" aria-label="Назад: Рецепты Twig"> <div class="md-footer__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </div> <div class="md-footer__title"> <span class="md-footer__direction"> Назад </span> <div class="md-ellipsis"> Рецепты Twig </div> </div> </a> <a href="../admin-recipes/" class="md-footer__link md-footer__link--next" aria-label="Вперед: Рецепты админки"> <div class="md-footer__title"> <span class="md-footer__direction"> Вперед </span> <div class="md-ellipsis"> Рецепты админки </div> </div> <div class="md-footer__button md-icon"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.top", "navigation.tracking", "navigation.footer", "search.highlight", "search.share", "search.suggest", "toc.follow", "content.tabs.link", "content.code.copy", "content.code.select", "content.action.edit"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 \u0431\u0443\u0444\u0435\u0440", "clipboard.copy": "\u041a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440", "search.result.more.one": "\u0415\u0449\u0451 1 \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.more.other": "\u0415\u0449\u0451 # \u043d\u0430 \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435", "search.result.none": "\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e", "search.result.one": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e 1 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435", "search.result.other": "\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439: #", "search.result.placeholder": "\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430", "search.result.term.missing": "\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442", "select.version": "\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044e"}, "version": null}</script> <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script> <script src="../../extra.js"></script>  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>